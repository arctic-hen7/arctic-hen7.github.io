<!DOCTYPE html><html lang=en-US class=light><head><base href=https://arctic-hen7.github.io/><meta charset=UTF-8><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=.perseus/static/tailwind.css><script type=module>window.__PERSEUS_RENDER_CFG = `{"tag/programming":"tag","post/eede1692-be41-404a-93e8-d4b048db21bc":"post","tag/economics":"tag","post/4726b90d-613e-4a45-b419-44cd6ec887a4":"post","post/bbb3e057-0f97-45a2-aa05-e791802fceee":"post","tag/frameworks":"tag","tag/habits":"tag","tag/ai":"tag","tag/commentary":"tag","":"","tag/dev":"tag","about":"about","tag/webdev":"tag","post/c26d230f-a546-4da0-be18-9857e168d7b9":"post","tag/rust":"tag","posts":"posts","tag/linux":"tag","tag/design":"tag","tag/productivity":"tag","tag/quickfix":"tag","tag/overview":"tag","tag/css":"tag","tag/self-development":"tag","shortform":"shortform","post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018":"post","tag/perseus":"tag","post/496eb33a-c137-4afa-a03c-2f165d522a98":"post","tag/tutorial":"tag","post/03ab02d7-f196-46d7-a1f9-d0c951245889":"post","tag/explanation":"tag","tag/open-source-admin":"tag","post/5633d380-fede-4c98-8c31-fc21610e4e5e":"post","contact":"contact"}`;

        import init from "https://arctic-hen7.github.io/.perseus/bundle.js";
        async function main() {
            await init("https://arctic-hen7.github.io/.perseus/bundle.wasm");
        }
        main();

        
        

window.__PERSEUS_GLOBAL_STATE = `{"motd":"\\"[W]e should be able to do anything, but want to do only what is good\\" — Montaigne 1.26\\n","woke_up_on_time":true}`;</script><meta itemprop=__perseus_head_boundary><title>Learn Rust Webdev by Creating a Custom CV Site | The Arctic Circle</title><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.3/dist/katex.min.css><link rel=stylesheet href=.perseus/static/org.css><meta name=description content="A crash-course in Rust web development using Perseus to create a custom CV website."><script>
window.__PERSEUS_INITIAL_STATE = `{"author":"Me","contents":"<p>\\n<i>A note to those in the United States, and other parts of the world: I will use the terms CV and resumé interchangeably here, as they are used this way in Australia to refer to a document more similar to the American conception of a CV.</i>\\n</p>\\n\\n<p>\\nA little while ago, I found myself needing to submit a CV as a formality for a casual admin position I&rsquo;d been offered, which led me to a realisation: formatting a CV is actually quite the task! I had one from a while ago at the ready, but it needed a little updating, and, me being me, I just <i>had</i> to update the whole thing to look much nicer, because heaven forbid I submit a CV that didn&rsquo;t look superbly aesthetically pleasing to an organisation that had already offered me a position&#x2026;\\n</p>\\n\\n<p>\\nAnyway, I found a number of neat little solutions, most notably <a href=\\"https://github.com/fresh-standard/fresh-resume-schema\\">Fresh</a>, although the templates weren&rsquo;t ideal, and JSON is a horrible format for human beings, so I ended up having to convert from TOML into JSON, and then the PDF renderer wasn&rsquo;t working properly, so I had to render to HTML and then save as a PDF, and the whole process was just a bit annoying. That said, I did end up with something quite nice that I was happy to submit. But, I thought, I can definitely make this better.\\n</p>\\n\\n<p>\\nSo, that&rsquo;s what I&rsquo;ve done! If you&rsquo;d like to have a look at the final product, check out <a href=\\"https://arctic-hen7.github.io/about\\">the about page</a> of this very website! It&rsquo;s not replete with all the details I would submit to an actual employer, since this is the internet, and I do like to have some privacy, but nontheless, it provides a good guide of what I&rsquo;ll wlak you through building. And, naturally, we&rsquo;re going to do this in <a href=\\"https://rust-lang.org\\">Rust</a>, because it is a <i>fantastic</i> language with <i>amazing</i> support for building super-fast websites! The framework we&rsquo;ll use to do this is <a href=\\"https://framesurge.sh/perseus/en-US\\">Perseus</a>, which I created back in 2021, and which I maintain today.\\n</p>\\n\\n<div id=\\"outline-container-org66494c3\\" class=\\"outline-2\\">\\n<h2 id=\\"org66494c3\\">Getting started with Perseus</h2>\\n<div class=\\"outline-text-2\\" id=\\"text-org66494c3\\">\\n<p>\\nTo kick things off, we&rsquo;ll need a new Perseus site. If you&rsquo;ve already got one, you can skip this stage.\\n</p>\\n\\n<p>\\nFirst off, assuming you&rsquo;ve <a href=\\"https://rust-lang.org/tools/install\\">installed Rust</a>, run this command to get the latest beta version of Perseus:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-sh\\">cargo install perseus-cli --version 0.4.0-beta.21\\n</pre>\\n</div>\\n\\n<p>\\nOnce that&rsquo;s done, <code>cd</code> into a directory you want to put your project&rsquo;s folder in, and then run these commands to create yourself a new template project:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-sh\\">perseus new cv-website\\n<span class=\\"org-type\\">cd</span> cv-website\\nperseus build\\n</pre>\\n</div>\\n\\n<p>\\nReplace <code>cv-website</code> here with whatever you want to call your site&rsquo;s crate (this doesn&rsquo;t impact anything else at all except the folder name and a metadata property in <code>Cargo.toml</code>). If you open <a href=\\"http://localhost:8080\\">http://localhost:8080</a> now, you should find an introductory page welcoming you to Perseus, which you can change the contents of to see things update automatically! If you&rsquo;re working on an older machine, you might want to follow <a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/compilation-times\\">these instructions</a> on how to improve Perseus compilation times by using an experimental compiler backend (perfectly safe, and up to 70% faster than normal <code>rustc</code>!).\\n</p>\\n\\n<p>\\nNext up, we&rsquo;ll need to add an engine-only dependency so we can parse our CV from TOML into a format Perseus can use to build our site, for which we&rsquo;ll use the <a href=\\"https://docs.rs/toml\\"><code>toml</code></a> package. By making this an engine-only dependency, Perseus will automatically exclude it from our Wasm bundle, making compilation times faster, and keeping the size of the bundle you need to send to your users as small as possible. You can do this by adding this to the section of your <code>Cargo.toml</code> that begins with <code>[target.'cfg(engine)'.dependencies]</code> (that <code>cfg(engine)</code> is pretty self-explanatory):\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-toml\\"><span class=\\"org-variable-name\\">toml</span> = <span class=\\"org-string\\">\\"0.7\\"</span>\\n<span class=\\"org-variable-name\\">thiserror</span> = <span class=\\"org-string\\">\\"1\\"</span> <span class=\\"org-comment-delimiter\\"># </span><span class=\\"org-comment\\">We'll need this later...</span>\\n</pre>\\n</div>\\n\\n<p>\\n<i>The <code>0.7</code> here is the latest version of the <code>toml</code> crate at the time of writing.</i>\\n</p>\\n\\n<p>\\nNow we&rsquo;ll need to create a Perseus template for handling our CV, which you can do wherever you like. For instance, on this website, it&rsquo;s in the <code>about</code> template, which creates the <code>about</code> page (for more about Perseus&rsquo; distinction between pages and templates, see <a href=\\"https://framesurge.sh/perseus/en-US/docs/next/core-principles\\">this page</a>), but, if you&rsquo;re just making this site to handle your CV and nothing else, you might want to put it in the <code>index</code> template. These templates typically have one file each in the <code>src/templates/</code> directory at the root of your project, and, for the rest of this tutorial, I&rsquo;ll assume you&rsquo;re creating your CV in the <code>index</code> template (special in Perseus, as it denotes the landing page of your site). If you used <code>perseus new</code> as above, then you should have something like the following in there (if not, add it for now, and we&rsquo;ll work from it):\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-keyword\\">use</span> <span class=\\"org-constant\\">perseus</span>::<span class=\\"org-constant\\">prelude</span>::*;\\n<span class=\\"org-keyword\\">use</span> <span class=\\"org-constant\\">sycamore</span>::<span class=\\"org-constant\\">prelude</span>::*;\\n\\n<span class=\\"org-keyword\\">fn</span> <span class=\\"org-function-name\\">index_page</span><span class=\\"org-rainbow-delimiters-depth-1\\">&lt;</span><span class=\\"org-variable-name\\">G</span>: <span class=\\"org-type\\">Html</span><span class=\\"org-rainbow-delimiters-depth-1\\">&gt;(</span><span class=\\"org-variable-name\\">cx</span>: <span class=\\"org-type\\">Scope</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span> -&gt; <span class=\\"org-type\\">View</span><span class=\\"org-rainbow-delimiters-depth-1\\">&lt;</span><span class=\\"org-type\\">G</span><span class=\\"org-rainbow-delimiters-depth-1\\">&gt;</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-preprocessor\\">view!</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span> cx,\\n        <span class=\\"org-comment-delimiter\\">// </span><span class=\\"org-comment\\">Don't worry, there are much better ways of styling in Perseus!</span>\\n        div<span class=\\"org-rainbow-delimiters-depth-3\\">(</span>style = <span class=\\"org-string\\">\\"display: flex; flex-direction: column; justify-content: center; align-items: center; height: 95vh;\\"</span><span class=\\"org-rainbow-delimiters-depth-3\\">)</span> <span class=\\"org-rainbow-delimiters-depth-3\\">{</span>\\n            h1 <span class=\\"org-rainbow-delimiters-depth-4\\">{</span> <span class=\\"org-string\\">\\"Welcome to Perseus!\\"</span> <span class=\\"org-rainbow-delimiters-depth-4\\">}</span>\\n            p <span class=\\"org-rainbow-delimiters-depth-4\\">{</span>\\n                <span class=\\"org-string\\">\\"This is just an example app. Try changing some code inside \\"</span>\\n                code <span class=\\"org-rainbow-delimiters-depth-1\\">{</span> <span class=\\"org-string\\">\\"src/templates/index.rs\\"</span> <span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n                <span class=\\"org-string\\">\\" and you'll be able to see the results here!\\"</span>\\n            <span class=\\"org-rainbow-delimiters-depth-4\\">}</span>\\n        <span class=\\"org-rainbow-delimiters-depth-3\\">}</span>\\n    <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">engine_only_fn</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">fn</span> <span class=\\"org-function-name\\">head</span><span class=\\"org-rainbow-delimiters-depth-1\\">(</span><span class=\\"org-variable-name\\">cx</span>: <span class=\\"org-type\\">Scope</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span> -&gt; <span class=\\"org-type\\">View</span><span class=\\"org-rainbow-delimiters-depth-1\\">&lt;</span><span class=\\"org-type\\">SsrNode</span><span class=\\"org-rainbow-delimiters-depth-1\\">&gt;</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-preprocessor\\">view!</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span> cx,\\n        title <span class=\\"org-rainbow-delimiters-depth-3\\">{</span> <span class=\\"org-string\\">\\"Welcome to Perseus!\\"</span> <span class=\\"org-rainbow-delimiters-depth-3\\">}</span>\\n    <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n\\n<span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">fn</span> <span class=\\"org-function-name\\">get_template</span><span class=\\"org-rainbow-delimiters-depth-1\\">&lt;</span><span class=\\"org-variable-name\\">G</span>: <span class=\\"org-type\\">Html</span><span class=\\"org-rainbow-delimiters-depth-1\\">&gt;()</span> -&gt; <span class=\\"org-type\\">Template</span><span class=\\"org-rainbow-delimiters-depth-1\\">&lt;</span><span class=\\"org-type\\">G</span><span class=\\"org-rainbow-delimiters-depth-1\\">&gt;</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-type\\">Template</span>::build<span class=\\"org-rainbow-delimiters-depth-2\\">(</span><span class=\\"org-string\\">\\"index\\"</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span>.view<span class=\\"org-rainbow-delimiters-depth-2\\">(</span>index_page<span class=\\"org-rainbow-delimiters-depth-2\\">)</span>.head<span class=\\"org-rainbow-delimiters-depth-2\\">(</span>head<span class=\\"org-rainbow-delimiters-depth-2\\">)</span>.build<span class=\\"org-rainbow-delimiters-depth-2\\">()</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n</pre>\\n</div>\\n\\n<p>\\nThe Perseus docs go over what all this sort of stuff means very well <a href=\\"https://framesurge.sh/perseus/en-US/docs/next/first-app/generating-pages\\">here</a>, but we&rsquo;ll cover it anyway now for brevity. The first two lines just import the preludes of Perseus and <a href=\\"https://github.com/sycamore-rs/sycamore\\">Sycamore</a>, the library Perseus uses for reactivite primitives and view creation (as React is to NextJS, Sycamore is to Perseus, for those from the JS world), and then we define the <code>index_page</code> function, which returns a <code>View&lt;G&gt;</code>, where that <code>&lt;G&gt;</code> means it&rsquo;s <i>generic</i> over the view backend, which is Rust&rsquo;s way of expressing that this function can be rendered to any environment that has the <code>Html</code> trait (e.g. it can be rendered on the server-side, in the browser, or in <a href=\\"https://framesurge.sh/perseus/en-US/docs/next/fundamentals/hydration\\">hydration</a>). This function takes a single argument for the <code>Scope</code> of the page it will generate, which is what lets you tie together all your reactive primitives. When this scope is destroyed, your page will be removed, and everything will be cleaned up neatly. Next, we use the <code>view!</code> macro, from Sycamore, to define the actual view of our page, in an HTML-like syntax that takes a bit of getting used to, but, to be honest, I really like it! Since this is an example app from Perseus itself, there&rsquo;s no styling library, so this code is doing all the styling manually, but don&rsquo;t worry, we&rsquo;ll fix that up later.\\n</p>\\n\\n<p>\\nThe next thing this does is define a <code>head</code> function, which is used to define the <code>&lt;head&gt;</code> of this page (the document metadata, like the title, etc.). This also takes a <code>Scope</code>, but it always returns a <code>View&lt;SsrNode&gt;</code>, since Perseus intelligently prerenders document metadata on the server-side (or, in our case, at build-time). That <code>#[engine_only_fn]</code> macro is saying to Rust that the function should only be defined when <code>#[cfg(engine)]</code> (a Rust conditional compilation predicate) is true, and it should be a dummy function on the client-side. This means we can use engine-only dependencies here without them polluting our client-side code, and this is how Perseus clearly distinguishes functions that will only be defined on the server from those that will only be defined on the client (and this distinction is enforced by the compiler, so your site won&rsquo;t even build if you accidentally mix things up, and you&rsquo;ll get a nice error message). All this function is actually doing is defining a little title for our page.\\n</p>\\n\\n<p>\\nThen, we have the public function that we&rsquo;ll use to actually define our app (to learn more about what <code>src/main.rs</code> is doing, since we won&rsquo;t need to touch it in this tutorial, see <a href=\\"https://framesurge.sh/perseus/en-US/docs/next/first-app/defining\\">here</a>), and that returns a Perseus <code>Template&lt;G&gt;</code> (again, generic over the rendering backend, like our <code>View&lt;G&gt;</code> from earlier). This template is called <code>index</code>, which Perseus recognises as the landing page of our site, and then we define the view as the <code>index_page</code> function, with the <code>head</code> function for the metadata, and then we call <code>.build()</code> to bring it all together.\\n</p>\\n</div>\\n</div>\\n\\n<div id=\\"outline-container-org0c4adca\\" class=\\"outline-2\\">\\n<h2 id=\\"org0c4adca\\">Building a CV system</h2>\\n<div class=\\"outline-text-2\\" id=\\"text-org0c4adca\\">\\n<p>\\nWith all the preamble out of the way, let&rsquo;s get to work on this thing! Before we can get to displaying anything though, we&rsquo;ll need to actually have a system to parse some human-readable data from your filesystem so Rust, and by extension Perseus, can understand it and use it. For this, we need to define a <i>schema</i> for our data, which is the structure that we&rsquo;ll expect it to have. Since this is Rust, if you make a mistake in your CV definition, there will be an error, which we&rsquo;ll tell Perseus to propagate up and return to us on the command-line, so you know exactly what has gone wrong.\\n</p>\\n\\n<p>\\nTo begin, let&rsquo;s keep things clean by defining a new module in our <code>src/templates/index.rs</code> file by adding the following:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-keyword\\">mod</span> <span class=\\"org-constant\\">cv</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-comment-delimiter\\">// </span><span class=\\"org-comment\\">...</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n</pre>\\n</div>\\n\\n<p>\\nNow, let&rsquo;s take a look at an example TOML file for what we want to write. Of course, you can modify this in any way you like, and adding new properties is fairly trivial once you&rsquo;ve got all this done.\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-toml\\"><span class=\\"org-variable-name\\">name</span> = <span class=\\"org-string\\">\\"\\"</span>\\n<span class=\\"org-variable-name\\">role</span> = <span class=\\"org-string\\">\\"\\"</span>\\n<span class=\\"org-variable-name\\">description</span> = <span class=\\"org-string\\">\\"\\"</span>\\n<span class=\\"org-variable-name\\">time</span> = [ <span class=\\"org-string\\">\\"2023\\"</span>, <span class=\\"org-string\\">\\"Present\\"</span> ] <span class=\\"org-comment-delimiter\\"># </span><span class=\\"org-comment\\">As an example</span>\\n\\n[[<span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\"><span class=\\"org-type\\">projects</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>]]\\n<span class=\\"org-variable-name\\">name</span> = <span class=\\"org-string\\">\\"\\"</span>\\n<span class=\\"org-variable-name\\">role</span> = <span class=\\"org-string\\">\\"\\"</span>\\n<span class=\\"org-variable-name\\">status</span> = <span class=\\"org-string\\">\\"\\"</span>\\n<span class=\\"org-variable-name\\">time</span> = [ <span class=\\"org-string\\">\\"2023\\"</span>, <span class=\\"org-string\\">\\"Present\\"</span> ]\\n<span class=\\"org-variable-name\\">link</span> = <span class=\\"org-string\\">\\"https://example.com\\"</span>\\n<span class=\\"org-variable-name\\">description</span> = <span class=\\"org-string\\">\\"\\"</span>\\n<span class=\\"org-variable-name\\">achievements</span> = []\\n</pre>\\n</div>\\n\\n<p>\\nIf we several of these files, which represent <i>areas</i> of our life, then each area has some projects in it, which all have their own details, and then some particular achievements. This could be represented by the following Rust schema, which we&rsquo;ll put in that <code>mod cv</code>:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">derive</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">Serialize, Deserialize</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">struct</span> <span class=\\"org-type\\">Cv</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">areas</span>: <span class=\\"org-type\\">Vec</span><span class=\\"org-rainbow-delimiters-depth-2\\">&lt;</span><span class=\\"org-type\\">CvArea</span><span class=\\"org-rainbow-delimiters-depth-2\\">&gt;</span>,\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">derive</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">Serialize, Deserialize</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">struct</span> <span class=\\"org-type\\">CvArea</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">name</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">role</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">description</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">time</span>: <span class=\\"org-rainbow-delimiters-depth-2\\">(</span><span class=\\"org-type\\">CvTime</span>, <span class=\\"org-type\\">CvTime</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">projects</span>: <span class=\\"org-type\\">Vec</span><span class=\\"org-rainbow-delimiters-depth-2\\">&lt;</span><span class=\\"org-type\\">CvProject</span><span class=\\"org-rainbow-delimiters-depth-2\\">&gt;</span>,\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">derive</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">Serialize, Deserialize</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">serde</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">untagged</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">enum</span> <span class=\\"org-type\\">CvTime</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-comment-delimiter\\">// </span><span class=\\"org-comment\\">This has to be a string because of TOML parsing requirements unfortunately</span>\\n    <span class=\\"org-type\\">Year</span><span class=\\"org-rainbow-delimiters-depth-2\\">(</span><span class=\\"org-type\\">String</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span>,\\n    <span class=\\"org-type\\">Present</span>,\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">derive</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">Serialize, Deserialize</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">struct</span> <span class=\\"org-type\\">CvProject</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">name</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">role</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">status</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">time</span>: <span class=\\"org-rainbow-delimiters-depth-2\\">(</span><span class=\\"org-type\\">CvTime</span>, <span class=\\"org-type\\">CvTime</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">link</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">description</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">achievements</span>: <span class=\\"org-type\\">Vec</span><span class=\\"org-rainbow-delimiters-depth-2\\">&lt;</span><span class=\\"org-type\\">String</span><span class=\\"org-rainbow-delimiters-depth-2\\">&gt;</span>,\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n</pre>\\n</div>\\n\\n<p>\\nThis is all pretty self-explanatory if you&rsquo;re familiar with Rust, but some odd bits for those who aren&rsquo;t might be <code>Vec&lt;T&gt;</code>, which is what we use in Rust to represent a list with elements of type <code>T</code>, and the <code>#[derive(Serialize, Deserialize)]</code> annotations: these are <i>derive macros</i> that ask Rust to use the code from the <code>serde</code> library to automatically implement functions to allow us to turn these representations of our CV into and out of strings. Strings in what format? Well, that can be defined by another library, like <code>serde_json</code> or, in our case, <code>toml</code>! (First-class support for serialization and deserialization through the <code>serde</code> crate is one of the most remarkable features of Rust, especially for those coming from other low-level languages.) To be able to do this though, we&rsquo;ll need to add this to the top of our <code>cv</code> module (<i>not</i> the file, because the module is semantically separate):\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-keyword\\">use</span> <span class=\\"org-constant\\">serde</span>::<span class=\\"org-rainbow-delimiters-depth-1\\">{</span><span class=\\"org-type\\">Deserialize</span>, <span class=\\"org-type\\">Serialize</span><span class=\\"org-rainbow-delimiters-depth-1\\">}</span>;\\n</pre>\\n</div>\\n\\n<p>\\nThis just imports the two macros we&rsquo;ll need to make this all work.\\n</p>\\n\\n<p>\\nOne final thing to note about all this code is that <code>#[serde(untagged)]</code> macro over <code>CvTime</code> (which, by the way, is an <code>enum</code>, which is Rust&rsquo;s way of representing a type that can be in one of several states, like <code>Result&lt;T, E&gt;</code>, which can be <code>Ok(T)</code> or <code>Err(E)</code>): this tells Serde to not expect any tagging of what <i>variant</i> of this enum to expect. Without this, we couldn&rsquo;t do something like <code>[ \\"2023\\", \\"Present\\" ]</code>, we&rsquo;d have to explicitly specify that <code>\\"2023\\"</code> is a year, which, in this case, is overly verbose and a little pointless.\\n</p>\\n</div>\\n\\n<div id=\\"outline-container-org0e7f215\\" class=\\"outline-3\\">\\n<h3 id=\\"org0e7f215\\">Bringing it to life</h3>\\n<div class=\\"outline-text-3\\" id=\\"text-org0e7f215\\">\\n<p>\\nSo now we have a schema, but we want it to make it reactive. Now, we could use unreactive state here, since it&rsquo;s never going to change, and that would probably be the smarter idea in general, but that won&rsquo;t show off Perseus&rsquo; reactive collections nearly as well as making it all reactive would! Granted, this does add some overhead we don&rsquo;t actually need at all, but it&rsquo;s not really going to slow anything down, and it seems cooler to have everything be <i>reactive</i>, doesn&rsquo;t it? If you want to make it all unreactive, like a sensible developer, that is left <i>as an exercise to the reader</i>. (Read: at least 30% of the point of this post is to show off the cool stuff Perseus can do, and it&rsquo;d be a bit remiss of me to skip the reactive state system.)\\n</p>\\n\\n<p>\\nTo do this, we just need to derive <code>ReactiveState</code>, which we can find in the <code>perseus::prelude</code> module, so let&rsquo;s import that at the start of <code>=mod cv</code> with this code:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-keyword\\">use</span> <span class=\\"org-constant\\">perseus</span>::<span class=\\"org-constant\\">prelude</span>::*;\\n</pre>\\n</div>\\n\\n<p>\\nNow let&rsquo;s change all those <code>#[derive(..)]</code> macros to this:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">derive</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">Serialize, Deserialize, Clone, ReactiveState</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n</pre>\\n</div>\\n\\n<p>\\nWe also need to add <code>Clone</code> here to satisfy a few internal requirements of Perseus. You can skip the <code>ReactiveState</code> part of this on the <code>enum CvTime</code>, since there&rsquo;s not really much point in making it reactive when everything above it already is. But you might be wondering why we&rsquo;re not just making the top-level <code>struct Cv</code> reactive, and the reason for this is that we&rsquo;re going to use <i>nested reactive state</i>, which lets you do crazy things like <code>state.areas.get()</code>, rather than <code>state.get().areas</code>, which makes <i>lifetimes</i> (a confusing, but incredibly powerful feature of Rust) cleaner, and it generally makes your code much neater. We can make things nested by adding <code>#[rx(nested)]</code> in a few places, which does&#x2026;well, exactly what you&rsquo;d expect. Here&rsquo;s what you should end up with:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">derive</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">Serialize, Deserialize, Clone, ReactiveState</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">struct</span> <span class=\\"org-type\\">Cv</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">[</span></span><span class=\\"org-preprocessor\\">rx</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-3\\">(</span></span><span class=\\"org-preprocessor\\">nested</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-3\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">]</span></span>\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">areas</span>: <span class=\\"org-type\\">RxVecNested</span><span class=\\"org-rainbow-delimiters-depth-2\\">&lt;</span><span class=\\"org-type\\">CvArea</span><span class=\\"org-rainbow-delimiters-depth-2\\">&gt;</span>,\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">derive</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">Serialize, Deserialize, Clone, ReactiveState</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">struct</span> <span class=\\"org-type\\">CvArea</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">name</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">role</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">description</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">time</span>: <span class=\\"org-rainbow-delimiters-depth-2\\">(</span><span class=\\"org-type\\">CvTime</span>, <span class=\\"org-type\\">CvTime</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span>,\\n    <span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">[</span></span><span class=\\"org-preprocessor\\">rx</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-3\\">(</span></span><span class=\\"org-preprocessor\\">nested</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-3\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">]</span></span>\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">projects</span>: <span class=\\"org-type\\">RxVecNested</span><span class=\\"org-rainbow-delimiters-depth-2\\">&lt;</span><span class=\\"org-type\\">CvProject</span><span class=\\"org-rainbow-delimiters-depth-2\\">&gt;</span>,\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">derive</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">Serialize, Deserialize, Clone</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">serde</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">untagged</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">enum</span> <span class=\\"org-type\\">CvTime</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-comment-delimiter\\">// </span><span class=\\"org-comment\\">This has to be a string because of TOML parsing requirements unfortunately</span>\\n    <span class=\\"org-type\\">Year</span><span class=\\"org-rainbow-delimiters-depth-2\\">(</span><span class=\\"org-type\\">String</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span>,\\n    <span class=\\"org-type\\">Present</span>,\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">derive</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">Serialize, Deserialize, Clone, ReactiveState</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">struct</span> <span class=\\"org-type\\">CvProject</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">name</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">role</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">status</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">time</span>: <span class=\\"org-rainbow-delimiters-depth-2\\">(</span><span class=\\"org-type\\">CvTime</span>, <span class=\\"org-type\\">CvTime</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">link</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">description</span>: <span class=\\"org-type\\">String</span>,\\n    <span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">[</span></span><span class=\\"org-preprocessor\\">rx</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-3\\">(</span></span><span class=\\"org-preprocessor\\">nested</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-3\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">]</span></span>\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-variable-name\\">achievements</span>: <span class=\\"org-type\\">RxVec</span><span class=\\"org-rainbow-delimiters-depth-2\\">&lt;</span><span class=\\"org-type\\">String</span><span class=\\"org-rainbow-delimiters-depth-2\\">&gt;</span>,\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n</pre>\\n</div>\\n\\n<p>\\nBut, hang on a minute, what the heck is <code>RxVecNested</code>? And what about <code>RxVec</code>? What&rsquo;s the difference? Where did these come from??\\n</p>\\n\\n<p>\\nWell, dear reader, these are <i>reactive collections</i>: types Perseus provides natively that make your life much easier when working with lists (and maps) in reactive state types. We&rsquo;ll need to import them though, since they are <i>not</i> in <code>perseus::prelude</code>, so add this to the top of <code>mod cv</code>:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-keyword\\">use</span> <span class=\\"org-constant\\">perseus</span>::<span class=\\"org-constant\\">state</span>::<span class=\\"org-constant\\">rx_collections</span>::<span class=\\"org-rainbow-delimiters-depth-1\\">{</span><span class=\\"org-type\\">RxVec</span>, <span class=\\"org-type\\">RxVecNested</span><span class=\\"org-rainbow-delimiters-depth-1\\">}</span>;\\n</pre>\\n</div>\\n\\n<p>\\nWe&rsquo;ll see how these collections work in a minute when we start using all this stuff to display things to our users, but, first, let&rsquo;s make a brief clarification about the difference between <code>RxVec</code> and <code>RxVecNested</code>: the former is what you&rsquo;d put something like a <code>String</code> in, and it makes its elements reactive by just throwing them inside Sycamore&rsquo;s <code>RcSignal</code> type. The latter is what you&rsquo;d use for a type that has its own fields, as it will call the <code>.make_rx()</code> method on each of its elements (that method is created automatically for us when we derive <code>ReactiveState</code> &#x2014; nifty, eh?).\\n</p>\\n\\n<p>\\nNow, let&rsquo;s create a function that will create an instance of all this from a directory full of <code>.toml</code> files. On my site, I put these in a <code>resume/</code> folder at the root of the site, but you could put them on a post-quantum floppy disk if you want.\\n</p>\\n\\n<p>\\nSince we&rsquo;re working with Rust, we may as well make this a method on <code>Cv</code> itself, but it&rsquo;s important to ask ourselves where we&rsquo;ll need this method: on the engine, the client, or both? The answer is just the engine, since we&rsquo;ll parse these files into our <code>struct Cv</code>, and <i>that&rsquo;s</i> what Perseus will send to our users&rsquo; browsers, which our code can work with directly. This is great, because it means we don&rsquo;t have to worry about browser filesystems, getting <code>toml</code> into the browser, or anything else. To make this clear, and to make our code compile, we&rsquo;ll annotate whatever we do with <code>#[cfg(engine)]</code>, which tells Rust to simply delete whatever we do from our code when we compile it for the browser. Here&rsquo;s our code:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">cfg</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">engine</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">impl</span> <span class=\\"org-type\\">Cv</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-comment-delimiter\\">// </span><span class=\\"org-comment\\">This will not examine subdirectories</span>\\n    <span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">fn</span> <span class=\\"org-function-name\\">from_directory</span><span class=\\"org-rainbow-delimiters-depth-2\\">(</span><span class=\\"org-variable-name\\">path</span>: <span class=\\"org-rust-ampersand\\">&amp;</span><span class=\\"org-type\\">str</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span> -&gt; <span class=\\"org-type\\">Result</span><span class=\\"org-rainbow-delimiters-depth-2\\">&lt;</span><span class=\\"org-type\\">Self</span>, <span class=\\"org-type\\">Error</span><span class=\\"org-rainbow-delimiters-depth-2\\">&gt;</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span>\\n        <span class=\\"org-keyword\\">use</span> <span class=\\"org-constant\\">std</span>::fs;\\n\\n        <span class=\\"org-keyword\\">let</span> <span class=\\"org-keyword\\">mut</span> <span class=\\"org-variable-name\\">areas</span> = <span class=\\"org-type\\">Vec</span>::new<span class=\\"org-rainbow-delimiters-depth-3\\">()</span>;\\n\\n        <span class=\\"org-keyword\\">for</span> <span class=\\"org-variable-name\\">entry</span> <span class=\\"org-keyword\\">in</span> <span class=\\"org-constant\\">fs</span>::read_dir<span class=\\"org-rainbow-delimiters-depth-3\\">(</span>path<span class=\\"org-rainbow-delimiters-depth-3\\">)</span>.map_err<span class=\\"org-rainbow-delimiters-depth-3\\">(</span><span class=\\"org-type\\">Error</span>::from<span class=\\"org-rainbow-delimiters-depth-3\\">)</span><span class=\\"org-rust-question-mark\\">?</span> <span class=\\"org-rainbow-delimiters-depth-3\\">{</span>\\n            <span class=\\"org-keyword\\">let</span> <span class=\\"org-variable-name\\">entry</span> = entry.map_err<span class=\\"org-rainbow-delimiters-depth-4\\">(</span><span class=\\"org-type\\">Error</span>::from<span class=\\"org-rainbow-delimiters-depth-4\\">)</span><span class=\\"org-rust-question-mark\\">?</span>;\\n\\n            <span class=\\"org-keyword\\">if</span> entry.metadata<span class=\\"org-rainbow-delimiters-depth-4\\">()</span>.map_err<span class=\\"org-rainbow-delimiters-depth-4\\">(</span><span class=\\"org-type\\">Error</span>::from<span class=\\"org-rainbow-delimiters-depth-4\\">)</span><span class=\\"org-rust-question-mark\\">?</span>.is_file<span class=\\"org-rainbow-delimiters-depth-4\\">()</span>\\n                &amp;&amp; entry.file_name<span class=\\"org-rainbow-delimiters-depth-4\\">()</span>.to_string_lossy<span class=\\"org-rainbow-delimiters-depth-4\\">()</span>.ends_with<span class=\\"org-rainbow-delimiters-depth-4\\">(</span><span class=\\"org-string\\">\\".toml\\"</span><span class=\\"org-rainbow-delimiters-depth-4\\">)</span>\\n            <span class=\\"org-rainbow-delimiters-depth-4\\">{</span>\\n                <span class=\\"org-keyword\\">let</span> <span class=\\"org-variable-name\\">contents</span> = <span class=\\"org-constant\\">fs</span>::read_to_string<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>entry.path<span class=\\"org-rainbow-delimiters-depth-2\\">()</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span>.map_err<span class=\\"org-rainbow-delimiters-depth-1\\">(</span><span class=\\"org-type\\">Error</span>::from<span class=\\"org-rainbow-delimiters-depth-1\\">)</span><span class=\\"org-rust-question-mark\\">?</span>;\\n                <span class=\\"org-keyword\\">let</span> <span class=\\"org-variable-name\\">parsed</span>: <span class=\\"org-type\\">CvArea</span> = <span class=\\"org-constant\\">toml</span>::from_str<span class=\\"org-rainbow-delimiters-depth-1\\">(</span><span class=\\"org-rust-ampersand\\">&amp;</span>contents<span class=\\"org-rainbow-delimiters-depth-1\\">)</span>.map_err<span class=\\"org-rainbow-delimiters-depth-1\\">(</span><span class=\\"org-type\\">Error</span>::from<span class=\\"org-rainbow-delimiters-depth-1\\">)</span><span class=\\"org-rust-question-mark\\">?</span>;\\n                areas.push<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>parsed<span class=\\"org-rainbow-delimiters-depth-1\\">)</span>;\\n            <span class=\\"org-rainbow-delimiters-depth-4\\">}</span>\\n        <span class=\\"org-rainbow-delimiters-depth-3\\">}</span>\\n\\n        <span class=\\"org-type\\">Ok</span><span class=\\"org-rainbow-delimiters-depth-3\\">(</span><span class=\\"org-type\\">Self</span> <span class=\\"org-rainbow-delimiters-depth-4\\">{</span>\\n            <span class=\\"org-variable-name\\">areas</span>: areas.into<span class=\\"org-rainbow-delimiters-depth-1\\">()</span>,\\n        <span class=\\"org-rainbow-delimiters-depth-4\\">}</span><span class=\\"org-rainbow-delimiters-depth-3\\">)</span>\\n    <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n</pre>\\n</div>\\n\\n<p>\\nThis code might look a bit gnarly, but it&rsquo;s actually really simple. We&rsquo;re just using the <code>std::fs::read_dir</code> function to read through all the files at the top-level of our target directory, specified through the <code>path</code> argument, which will be interpreted relative to the root of our project, which means we can&rsquo;t organise our files by folders, but that would be fairly trivial to implement with a library like <a href=\\"https://docs.rs/walkdir\\">this</a>. We need to handle the fact that each entry in the directory might be unable to be accessed though, or the entire directory may be inaccessible, hence all that <code>.map_err()?</code> stuff, which we&rsquo;ll come to. We&rsquo;re also ignoring any folders, or any files that aren&rsquo;t <code>.toml</code>, and we&rsquo;re assuming that all files in our directory have UTF-8 names (this is the <code>.to_string_lossy()</code> method, since Rust strings must be UTF-8). If we find a file that matches though, we&rsquo;ll read its contents, and convert them into a <code>CvArea</code> with the <code>toml::from_str</code> method (yeah, it&rsquo;s that easy). If you don&rsquo;t know what all those <code>&amp;</code> characters mean, you&rsquo;re in for a world of fun with Rust, and you should probably take a look at <a href=\\"https://doc.rust-lang.org/stable/book/\\">the Rust book</a>! Finally, we&rsquo;re using the <code>.into()</code> method to convert <code>areas</code> the <code>Vec&lt;CvArea&gt;</code> into the unreactive version of an <code>RxVecNested&lt;CvArea&gt;</code>. This method is automatically provided for convenience.\\n</p>\\n\\n<p>\\nNow let&rsquo;s come to the error handling in this method, which is a bit unique: we&rsquo;re converting everything into the type <code>Error</code>, which we haven&rsquo;t defined yet, using some kind of magical <code>Error::from</code> function, which appears to take as an argument an error of any kind. This is the preferred pattern at the moment for Perseus error handling when we&rsquo;re generating the state we&rsquo;ll use in our views: we create an error type that encompasses everything in our app, and then we use something like a <code>::from()</code> associated function to convert everything into that. The reasoning for this will become clear in a little while. Let&rsquo;s pop over to <code>src/main.rs</code> and drop the following code at the bottom, to define <code>Error</code>:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">cfg</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">engine</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">derive</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">thiserror::Error, Debug</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">error</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">transparent</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">struct</span> <span class=\\"org-type\\">Error</span><span class=\\"org-rainbow-delimiters-depth-1\\">(</span><span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">[</span></span><span class=\\"org-preprocessor\\">from</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">]</span></span> <span class=\\"org-type\\">Box</span><span class=\\"org-rainbow-delimiters-depth-2\\">&lt;</span><span class=\\"org-keyword\\">dyn</span> <span class=\\"org-constant\\">std</span>::<span class=\\"org-constant\\">error</span>::<span class=\\"org-type\\">Error</span> + <span class=\\"org-type\\">Send</span> + <span class=\\"org-type\\">Sync</span><span class=\\"org-rainbow-delimiters-depth-2\\">&gt;</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span>;\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">cfg</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">engine</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">impl</span> <span class=\\"org-type\\">Error</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">[</span></span><span class=\\"org-preprocessor\\">inline</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">]</span></span>\\n    <span class=\\"org-keyword\\">fn</span> <span class=\\"org-function-name\\">from</span><span class=\\"org-rainbow-delimiters-depth-2\\">&lt;</span><span class=\\"org-variable-name\\">E</span>: <span class=\\"org-constant\\">std</span>::<span class=\\"org-constant\\">error</span>::<span class=\\"org-type\\">Error</span> + <span class=\\"org-type\\">Send</span> + <span class=\\"org-type\\">Sync</span> + '<span class=\\"org-keyword\\">static</span><span class=\\"org-rainbow-delimiters-depth-2\\">&gt;(</span><span class=\\"org-variable-name\\">value</span>: <span class=\\"org-type\\">E</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span> -&gt; <span class=\\"org-type\\">Self</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span>\\n        <span class=\\"org-type\\">Error</span><span class=\\"org-rainbow-delimiters-depth-3\\">(</span>value.into<span class=\\"org-rainbow-delimiters-depth-4\\">()</span><span class=\\"org-rainbow-delimiters-depth-3\\">)</span>\\n    <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n</pre>\\n</div>\\n\\n<p>\\nHere, we&rsquo;re using <code>thiserror</code>, a helpful crate that allows us to define our own error types easily, which it will then integrate with Rust. You could handle implementing the <code>std::error::Error</code> trait manually, but <code>thiserror</code> is simpler, and we only need all this on the engine-side anyway (since it&rsquo;s only needed for state generation). The contents of our <code>struct Error</code> are a <code>Box&lt;dyn std::error::Error&gt;</code>, which you shouldn&rsquo;t worry too much about if you&rsquo;re new to Rust: it basically means that this can store <i>anything</i> that implements the <code>std::error::Error</code> trait, which is almost any error from any Rust library worth its salt. We use the <code>#[from]</code> helper macro in there so we can call <code>.into()</code> on any <code>Box</code> with an error inside to turn it into this error, and we use <code>#[error(transparent)]</code> to defer to the underlying error in the <code>Box</code> when we need to produce an error message. Finally, we create a manual <code>from</code> function that will take any error type (the <code>'static</code> makes sure we don&rsquo;t accept references to errors, since we only want owned types), which calls the <code>.into()</code> method implicit from our earlier <code>#[from]</code> macro use. Pretty much, this lets us take anything that returns a <code>Result&lt;T, E&gt;</code> (meaning it was either a success of type <code>T</code> or an error of type <code>E</code>) and call <code>.map_err(Error::from)</code> to turn <code>E</code> into our <code>Error</code> type. We can then use the <code>?</code> operator to automatically return the error if we encounter it, terminating our function (a useful but of syntactic sugar Rust provides us with for brevity). All this means we can unify any errors we get (since <code>std::fs::read_dir</code> has a different error type from <code>toml::from_str</code>, as an example) into one type, which makes things <i>much</i> easier when we&rsquo;re working with Perseus.\\n</p>\\n\\n<p>\\nYou&rsquo;ll then want to add <code>use crate::Error;</code> (annotated with a <code>#[cfg(engine)]</code>!) to the top of <code>mod cv</code> back in <code>src/templates/index.rs</code>.\\n</p>\\n</div>\\n</div>\\n\\n<div id=\\"outline-container-org05d6fb4\\" class=\\"outline-3\\">\\n<h3 id=\\"org05d6fb4\\">Getting it to Perseus</h3>\\n<div class=\\"outline-text-3\\" id=\\"text-org05d6fb4\\">\\n<p>\\nNow for the amusingly simple bit: getting our CV into Perseus. Since we have <code>Cv::from_dir</code> all implemented, we can just crate a wrapper function over that that satisfies Perseus, and then we&rsquo;re good. To do that, add this function to <code>src/templates/index.rs</code>, but <i>not</i> in the <code>mod cv</code>!\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">engine_only_fn</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">async</span> <span class=\\"org-keyword\\">fn</span> <span class=\\"org-function-name\\">get_build_state</span><span class=\\"org-rainbow-delimiters-depth-1\\">(</span><span class=\\"org-variable-name\\">_</span>: <span class=\\"org-type\\">StateGeneratorInfo</span><span class=\\"org-rainbow-delimiters-depth-2\\">&lt;</span><span class=\\"org-rainbow-delimiters-depth-3\\">()</span><span class=\\"org-rainbow-delimiters-depth-2\\">&gt;</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span> -&gt; <span class=\\"org-type\\">Result</span><span class=\\"org-rainbow-delimiters-depth-1\\">&lt;</span><span class=\\"org-type\\">IndexState</span>, <span class=\\"org-type\\">BlamedError</span><span class=\\"org-rainbow-delimiters-depth-2\\">&lt;</span><span class=\\"org-type\\">Error</span><span class=\\"org-rainbow-delimiters-depth-2\\">&gt;</span><span class=\\"org-rainbow-delimiters-depth-1\\">&gt;</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-keyword\\">let</span> <span class=\\"org-variable-name\\">cv</span> = <span class=\\"org-constant\\">cv</span>::<span class=\\"org-type\\">Cv</span>::from_directory<span class=\\"org-rainbow-delimiters-depth-2\\">(</span><span class=\\"org-string\\">\\"cv\\"</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span><span class=\\"org-rust-question-mark\\">?</span>;\\n\\n    <span class=\\"org-type\\">Ok</span><span class=\\"org-rainbow-delimiters-depth-2\\">(</span><span class=\\"org-type\\">IndexState</span> <span class=\\"org-rainbow-delimiters-depth-3\\">{</span> cv <span class=\\"org-rainbow-delimiters-depth-3\\">}</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n</pre>\\n</div>\\n\\n<p>\\nThis <code>get_build_state</code> function is what we&rsquo;d typically call the function that Perseus will call to generate state at build-time for our page. This will be called when we run <code>perseus build</code>, <code>perseus serve</code>, <code>perseus export</code>, etc., and then Perseus will automatically cache whatever it generates for later use, minimising the amount of work that has to be done when requests start to come in, and dramatically speeding up your app in many cases. This function is <code>async</code>, since Perseus will let us do all sorts of advanced things in here in parallel with the rest of our build-time state generator functions, and it takes a single argument with some information about the context we&rsquo;re building in, like the path we&rsquo;re building for, and the locale it&rsquo;s in if we&rsquo;re making a multilingual app. We aren&rsquo;t, and we know we&rsquo;re on the landing page, so we don&rsquo;t need any of that stuff, hence the <code>_</code> variable name to ignore it. You should change the <code>\\"cv\\"</code> directory to wherever you&rsquo;re putting your CV files, relative to the root of your project.\\n</p>\\n\\n<p>\\nThen we return a <code>Result&lt;IndexState, BlamedError&lt;Error&gt;&gt;</code>, which is a bit complex. First off, we need to define <code>IndexState</code>, which is the state type our page will expect. This will be a thin wrapper over <code>Cv</code>. In fact you could use <code>Cv</code> directly here, but we&rsquo;ll keep things separate for readability. Pop this in the root of the <code>src/templates/index.rs</code> file:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">derive</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">Serialize, Deserialize, Clone, ReactiveState</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">rx</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">alias = </span><span class=\\"org-string\\">\\"IndexStateRx\\"</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">rx</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">(</span></span><span class=\\"org-preprocessor\\">hsr_ignore</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">struct</span> <span class=\\"org-type\\">IndexState</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">[</span></span><span class=\\"org-preprocessor\\">rx</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-3\\">(</span></span><span class=\\"org-preprocessor\\">nested</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-3\\">)</span></span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-2\\">]</span></span>\\n    <span class=\\"org-variable-name\\">resume</span>: <span class=\\"org-constant\\">cv</span>::<span class=\\"org-type\\">Cv</span>,\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n</pre>\\n</div>\\n\\n<p>\\nNote that you&rsquo;ll also need to add <code>use serde::{Deserialize, Serialize};</code> to the top of your <code>src/templates/index.rs</code> file to make this work.\\n</p>\\n\\n<p>\\nThis is pretty similar to what we&rsquo;ve seen before: just creating a reactive state type that uses nested reactivity with our <code>resume</code>, but we&rsquo;re also adding two extra helper macros so Perseus can do some more cool stuff: we use <code>#[rx(alias = \\"IndexStateRx\\")]</code> so we can directly reference the reactive version of <code>IndexState</code> (which itself will stay unreactive, since Perseus creates a whole new <code>struct</code> when we derive <code>ReactiveState</code>). We also add <code>#[rx(hsr_ignore)]</code> so that the state of this page will be left out of Perseus&rsquo; <i>hot state reloading</i> system, which is what Perseus uses to keep your app in a constant state between reloads. When you change some code, Perseus will cache the current state of your app, reload the page, and then restore the old state. However, if you&rsquo;ve changed that state itself, rather than the code (e.g. fixing a typo in one of those <code>.toml</code> files), then Perseus will still overwrite that with the old state unless you manually reload the page. This is annoying, and can be avoided by telling Perseus that we want to opt out of HSR on this particular page. Using unreactive state from the start would make this implicit, but, again, that is left as <i>an exercise to the reader</i>.\\n</p>\\n\\n<p>\\nNow let&rsquo;s come back to that <code>BlamedError&lt;Error&gt;</code> error type of our <code>get_build_state</code> function: this means that we return the blamed version of our <code>Error</code> type (which you&rsquo;ll need to import in the root of the file as well with <code>use crate::Error;</code>), which Perseus uses to distinguish errors caused by client misbehaviour from those caused by genuine server errors. But, you might ask, this function runs at build-time, how could a client possibly manipulate it? Well, you&rsquo;d be right! But Perseus doesn&rsquo;t know that before it inspects your app, because there&rsquo;s another feature of Perseus that lets you build pages in a template <i>on-demand</i>, meaning the <code>get_build_state</code> function  can sometimes actually be executed before a request, in which case the client can provide a bogus path, whcih would be blamed on them. In those kinds of cases, we probably want 404 errors rather than 500s, because bogus data from clients doesn&rsquo;t constitute a server error. Again, none of this is a concern in our app, but Perseus needs us to provide a <code>BlamedError</code> all the same.\\n</p>\\n\\n<p>\\nSo how are our <code>Error</code> types getting turned into <code>BlamedError</code> types? The <code>?</code> operator! It implicitly performs a <code>.into()</code> transform when necessary, and anything implementing <code>std::error::Error</code> can be converted into a <code>BlamedError</code>! But this is also the reason why we need to convert everything into an <code>Error</code> first in <code>Cv::from_directory</code>: because <code>?</code> can only perform one layer of conversions, not two, and because we need to specify a singular error type for our function to return. This means those <code>Error::from</code> calls are required for functions that have multiple types of errors that they need to deal with. Part of the rationale for this is also actually security, because any errors generated on the server should not necessarily just be blindly returned, because they will get to the client in a lot of cases, and you probably don&rsquo;t want to have 404 errors that allow a client to enumerate the directory structure of your server&#x2026;\\n</p>\\n</div>\\n</div>\\n</div>\\n\\n<div id=\\"outline-container-org9425050\\" class=\\"outline-2\\">\\n<h2 id=\\"org9425050\\">Displaying it to the user</h2>\\n<div class=\\"outline-text-2\\" id=\\"text-org9425050\\">\\n<p>\\nAlright, we&rsquo;ve done enough schema work! Let&rsquo;s get to actually displaying all this to users of our site now. To do that, let&rsquo;s start by updating our <code>get_template</code> function to this:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">fn</span> <span class=\\"org-function-name\\">get_template</span><span class=\\"org-rainbow-delimiters-depth-1\\">&lt;</span><span class=\\"org-variable-name\\">G</span>: <span class=\\"org-type\\">Html</span><span class=\\"org-rainbow-delimiters-depth-1\\">&gt;()</span> -&gt; <span class=\\"org-type\\">Template</span><span class=\\"org-rainbow-delimiters-depth-1\\">&lt;</span><span class=\\"org-type\\">G</span><span class=\\"org-rainbow-delimiters-depth-1\\">&gt;</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-type\\">Template</span>::build<span class=\\"org-rainbow-delimiters-depth-2\\">(</span><span class=\\"org-string\\">\\"index\\"</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span>\\n        .view_with_state<span class=\\"org-rainbow-delimiters-depth-2\\">(</span>index_page<span class=\\"org-rainbow-delimiters-depth-2\\">)</span>\\n        .head<span class=\\"org-rainbow-delimiters-depth-2\\">(</span>head<span class=\\"org-rainbow-delimiters-depth-2\\">)</span>\\n        .build_state_fn<span class=\\"org-rainbow-delimiters-depth-2\\">(</span>get_build_state<span class=\\"org-rainbow-delimiters-depth-2\\">)</span>\\n        .build<span class=\\"org-rainbow-delimiters-depth-2\\">()</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n</pre>\\n</div>\\n\\n<p>\\nThis is fairly self-explanatory: it&rsquo;s the same as what we had before (and you&rsquo;ll need to change the template name again if you&rsquo;re using a different page for your CV), just changing <code>.view()</code> to <code>.view_with_state()</code>, which instead accepts a view function that takes in our state (defined as <code>IndexState</code> earlier). We&rsquo;re leaving the head the same, and we&rsquo;re also adding <code>.build_state_fn()</code>, which we&rsquo;re giving our build state function (<code>get_build_state</code>) so Perseus knows about it, and can execute it at build-time. Unlike with a lot of JS frameworks, there are no magical function names that you just export: Perseus makes sure you know what&rsquo;s going on at all times by asking you to explicitly tell it what your state generation functions are.\\n</p>\\n\\n<p>\\nNext, you might as well change the title of your page, which can be done in the <code>head</code> fucntion from before (I trust you to figure this one out&#x2026;).\\n</p>\\n\\n<p>\\nNow, everything comes down to the <code>index_page</code> function, which we&rsquo;ll redefine as follows:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">auto_scope</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">fn</span> <span class=\\"org-function-name\\">index_page</span><span class=\\"org-rainbow-delimiters-depth-1\\">&lt;</span><span class=\\"org-variable-name\\">G</span>: <span class=\\"org-type\\">Html</span><span class=\\"org-rainbow-delimiters-depth-1\\">&gt;(</span><span class=\\"org-variable-name\\">cx</span>: <span class=\\"org-type\\">Scope</span>, <span class=\\"org-type\\">IndexStateRx</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span> resume <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>: <span class=\\"org-rust-ampersand\\">&amp;</span><span class=\\"org-type\\">IndexStateRx</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span> -&gt; <span class=\\"org-type\\">View</span><span class=\\"org-rainbow-delimiters-depth-1\\">&lt;</span><span class=\\"org-type\\">G</span><span class=\\"org-rainbow-delimiters-depth-1\\">&gt;</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-preprocessor\\">view!</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span> cx,\\n        <span class=\\"org-comment-delimiter\\">// </span><span class=\\"org-comment\\">...</span>\\n    <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n</pre>\\n</div>\\n\\n<p>\\nThis has a few new things in it from our old function. We&rsquo;ve replaced the contents we&rsquo;re rendering with a placeholder for now, and we&rsquo;re still taking in a <code>Scope</code> and returning a <code>View&lt;G&gt;</code>, where <code>G</code> satisfies the <code>Html</code> trait, but we&rsquo;re also taking in a type <code>IndexStateRx</code>, which you&rsquo;ll remember we defined as the name of the reactive version of our <code>struct IndexState</code>, which stores our resume! This is just using some fancy Rust destructuring syntax that JS developers will probably be familiar with, so that we can get the <code>resume</code> property out straight away. We could just as easily have taken <code>state: &amp;IndexStateRx</code> and then written <code>let resume = &amp;state.resume;</code>, but this is quicker.\\n</p>\\n\\n<p>\\nThe tricky thing to understand here is that <code>#[auto_scope]</code> (which we wouldn&rsquo;t need if we&rsquo;d been using unreactive state, which is simpler), which is one of the most complicated things in Perseus for people who are new to Rust. I mentioned <i>lifetimes</i> earlier, and these are how Rust keeps track of when it should dispose of variables to stop the program from running out of memory very quickly indeed, and the lifetimes for Perseus pages are a little convoluted: each page has its own lifetime, and all those lifetimes fall <i>within</i> the lifetime of the entire app. This can be expressed through the lifetimes on the <code>cx</code> variable as a <code>BoundedScope&lt;'app, 'page&gt;</code> (a <code>Scope</code> that lives as long as <code>'page</code>, with context available from <code>'app</code>). Perseus also caches our reactive state at the app-level so we can get back to pages we&rsquo;ve already been to literally instantly (an example of app-level caching, which Perseus was the first to implement at a framework-level, making your life <i>much</i> easier), but it hands us a <i>reference</i> to that state that will only live as long as our page, so that we can&rsquo;t accidentally create effects on our state that will outlive our page. In fact, there used to be a bug in Perseus where, if you tried to listen for when there was going to be a page change, those event listeners outlived your pages, meaning they kept on accumulating, leading to some very interesting console outputs! Today, this is long fixed, and Perseus is careful to make sure these kinds of errors are much harder to make. In short, the state we take in is <code>&amp;'page IndexStateRx</code>, meaning it&rsquo;s a reference to the reactive state that lives as long as the page.\\n</p>\\n\\n<p>\\nYou could write all this out manually, but, because it&rsquo;s the same for every Perseus page, and because lifetimes are hard, Perseus provides the <code>#[auto_scope]</code> macro, which lets you omit all the lifetimes and use a <code>Scope</code> rather than a <code>BoundedScope</code>. Basically, that macro lets you be lazy and fixes your code for you. You can avoid it if you&rsquo;d like, and you can learn more about it <a href=\\"https://docs.rs/perseus/0.4.0-beta.18/perseus/prelude/attr.auto_scope.html\\">here</a>.\\n</p>\\n\\n<p>\\nAlright, with that tangent out of the way, let&rsquo;s actually display our CV already! Let&rsquo;s start off with just getting the markup (i.e. HTML) right, before we handle making it look pretty.\\n</p>\\n\\n<p>\\nSo, when we think about how our CV is structured, we probably want to display it something like this:\\n</p>\\n\\n<ul class=\\"org-ul\\">\\n<li>Area 1\\n<ul class=\\"org-ul\\">\\n<li>Project 1\\n<ul class=\\"org-ul\\">\\n<li>Achievements</li>\\n</ul></li>\\n<li>Project 2\\n<ul class=\\"org-ul\\">\\n<li>Achievements</li>\\n</ul></li>\\n</ul></li>\\n<li>Area 2</li>\\n<li>etc.</li>\\n</ul>\\n\\n<p>\\nTo do this, we&rsquo;re going to need to do three levels of iteration: we&rsquo;ll need to iterate over the areas, then we&rsquo;ll need to iterate over the projects in each area, and finally over the achievements in each project. This might sound daunting, but Rust and Sycamore actually make this really easy: you can take a list of, say, areas, and <i>turn that into</i> a list of views that display them with the <code>.map()</code> function! So, let&rsquo;s start with the areas by using this code inside the body of <code>index_page</code> (replacing the <code>view! { cx, }</code> etc.):\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-keyword\\">let</span> <span class=\\"org-variable-name\\">areas</span> = create_ref<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>cx, cv.areas.get<span class=\\"org-rainbow-delimiters-depth-2\\">()</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span>;\\n<span class=\\"org-keyword\\">let</span> <span class=\\"org-variable-name\\">resume</span> = <span class=\\"org-type\\">View</span>::new_fragment<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>\\n    areas.iter<span class=\\"org-rainbow-delimiters-depth-2\\">()</span>\\n         .map<span class=\\"org-rainbow-delimiters-depth-2\\">(</span>|area| <span class=\\"org-rainbow-delimiters-depth-3\\">{</span>\\n             <span class=\\"org-preprocessor\\">view!</span> <span class=\\"org-rainbow-delimiters-depth-4\\">{</span> cx,\\n                 div<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>class = <span class=\\"org-string\\">\\"cv-area-wrapper\\"</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n                    <span class=\\"org-comment-delimiter\\">// </span><span class=\\"org-comment\\">Header</span>\\n                     div<span class=\\"org-rainbow-delimiters-depth-2\\">(</span>class = <span class=\\"org-string\\">\\"cv-area-header\\"</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span>\\n                         h3<span class=\\"org-rainbow-delimiters-depth-3\\">(</span>class = <span class=\\"org-string\\">\\"cv-area-heading\\"</span><span class=\\"org-rainbow-delimiters-depth-3\\">)</span> <span class=\\"org-rainbow-delimiters-depth-3\\">{</span>\\n                             <span class=\\"org-rainbow-delimiters-depth-4\\">(</span>area.name.get<span class=\\"org-rainbow-delimiters-depth-1\\">()</span><span class=\\"org-rainbow-delimiters-depth-4\\">)</span>\\n                         <span class=\\"org-rainbow-delimiters-depth-3\\">}</span>\\n                         p<span class=\\"org-rainbow-delimiters-depth-3\\">(</span>class = <span class=\\"org-string\\">\\"cv-time\\"</span><span class=\\"org-rainbow-delimiters-depth-3\\">)</span> <span class=\\"org-rainbow-delimiters-depth-3\\">{</span> <span class=\\"org-type\\">Time</span><span class=\\"org-rainbow-delimiters-depth-4\\">(</span><span class=\\"org-rust-ampersand\\">&amp;</span>area.time.get<span class=\\"org-rainbow-delimiters-depth-1\\">()</span><span class=\\"org-rainbow-delimiters-depth-4\\">)</span> <span class=\\"org-rainbow-delimiters-depth-3\\">}</span>\\n                     <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>\\n                     <span class=\\"org-comment-delimiter\\">// </span><span class=\\"org-comment\\">Wrapper to maintain the spacing so the border continues out</span>\\n                     div<span class=\\"org-rainbow-delimiters-depth-2\\">(</span>class = <span class=\\"org-string\\">\\"cv-content-wrapper\\"</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span>\\n                         h4<span class=\\"org-rainbow-delimiters-depth-3\\">(</span>class = <span class=\\"org-string\\">\\"cv-area-role\\"</span><span class=\\"org-rainbow-delimiters-depth-3\\">)</span> <span class=\\"org-rainbow-delimiters-depth-3\\">{</span> <span class=\\"org-rainbow-delimiters-depth-4\\">(</span>area.role.get<span class=\\"org-rainbow-delimiters-depth-1\\">()</span><span class=\\"org-rainbow-delimiters-depth-4\\">)</span> <span class=\\"org-rainbow-delimiters-depth-3\\">}</span>\\n                         p<span class=\\"org-rainbow-delimiters-depth-3\\">(</span>dangerously_set_inner_html = <span class=\\"org-rust-ampersand\\">&amp;</span>area.description.get<span class=\\"org-rainbow-delimiters-depth-4\\">()</span><span class=\\"org-rainbow-delimiters-depth-3\\">)</span> <span class=\\"org-rainbow-delimiters-depth-3\\">{}</span>\\n                         div <span class=\\"org-rainbow-delimiters-depth-3\\">{</span>\\n                             <span class=\\"org-rainbow-delimiters-depth-4\\">(</span>projects<span class=\\"org-rainbow-delimiters-depth-4\\">)</span>\\n                         <span class=\\"org-rainbow-delimiters-depth-3\\">}</span>\\n                     <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>\\n                 <span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n             <span class=\\"org-rainbow-delimiters-depth-4\\">}</span>\\n         <span class=\\"org-rainbow-delimiters-depth-3\\">}</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span>\\n         .collect<span class=\\"org-rainbow-delimiters-depth-2\\">()</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">)</span>;\\n\\n<span class=\\"org-preprocessor\\">view!</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span> cx,\\n    div<span class=\\"org-rainbow-delimiters-depth-2\\">(</span>class = <span class=\\"org-string\\">\\"cv-wrapper-outer\\"</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span>\\n        div<span class=\\"org-rainbow-delimiters-depth-3\\">(</span>class = <span class=\\"org-string\\">\\"cv-wrapper-inner\\"</span><span class=\\"org-rainbow-delimiters-depth-3\\">)</span> <span class=\\"org-rainbow-delimiters-depth-3\\">{</span>\\n            <span class=\\"org-rainbow-delimiters-depth-4\\">(</span>cv<span class=\\"org-rainbow-delimiters-depth-4\\">)</span>\\n        <span class=\\"org-rainbow-delimiters-depth-3\\">}</span>\\n    <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n</pre>\\n</div>\\n\\n<p>\\nThe first line of this is where our comprehension problems actually start, and it&rsquo;s got to do with lifetimes again. But, stick with me, this is actually really easy to understand! Remember that the <code>areas</code> field of <code>resume</code> is nested? Okay, that means we can grab its value with <code>resume.areas.get()</code>, which will give us a reference. But that reference isn&rsquo;t guaranteed to live as long as <code>'page</code>, because no-one told it to! So, we need to tell it to, which is usually <i>really hard</i> in Rust, but Sycamore has an extremely convenient function called <code>create_ref(cx, val)</code> that returns <code>&amp;'page val</code>, assuming <code>cx: 'page</code>. Pretty much, it takes a thing that it can coerce to live as long as the page (which isn&rsquo;t everything, but it works here, because I lied a bit about <code>.get()</code>, it actually returns an <code>Rc</code>, which is a thing called a <i>smart pointer</i> in Rust&#x2026;), and then returns to you a version of it that does live exactly that long. When the user goes to the next page, any such references get automatically cleaned up. <b>The long and short of this is that you need to wrap <code>resume.areas.get()</code> in a <code>create_ref()</code> call</b>, but the reasoning is pretty interesting if you&rsquo;re getting into Rust! (I have to admit, coming from the JS world, this sort of thing felt like going from being a toddler throwing paint at a wall to developing actual <i>software</i>.)\\n</p>\\n\\n<p>\\nBut let&rsquo;s backtrack for a second: why does <code>areas</code> need to live for as long as the page? Because we&rsquo;re going to be displaying data from it, and, if those data suddenly aren&rsquo;t in memory anymore, well, then what are we displaying to the user? Great question, that&rsquo;s called <i>undefined behaviour</i>, which Rust conveniently makes impossible (well, not impossible, but really freaking hard) through things like lifetimes!\\n</p>\\n\\n<p>\\nNext, we put the view for our resume in a variable called <code>resume</code> (views are just data structures, so you can store them in variables, send them to functions, etc.), which is basically a concatenation (i.e. summing together) of a list of <code>View</code> fragments created by calling the <code>.iter().map()</code> methods on <code>areas</code>, which let us provide a function that will transform each element of the list according to some logic (which, here, is creating a view to display that particular area). Then, we call <code>.collect()</code> to go from a Rust iterator into a <code>Vec&lt;View&lt;G&gt;&gt;</code> (i.e. a list of views), and that gets concatenated by <code>View::new_fragment</code>! Don&rsquo;t worry if that doesn&rsquo;t make a great deal of sense, you need to know a bit about how Rust handles iteration to properly get it, but basically understand that the function in <code>.map()</code> is being used to transform each element of the list.\\n</p>\\n\\n<p>\\nSo, what is that function doing? Well, it&rsquo;s using the <code>view!</code> macro to create a new view, which is wrapped in a <code>div</code> that we&rsquo;ll use for spacing, and then we have two sections: one for the header, which has the name of the area and the time we were involved in it, and then we&rsquo;ve got a wrapper for the content, which contains the role we had in this area of our life, and then a description of the role (interpolated directly into HTML, which allows us to do things like <code>&lt;i&gt;here's some italic text!&lt;/i&gt;</code> in our <code>.toml</code> files, or you could even do Markdown parsing on the descriptions if you wanted). There are two unexplained things in here though: where <code>projects</code> comes from, and what the heck <code>Time(&amp;area.time.get())</code> means. To understand the latter, remember that the area is a reactive <code>struct CvArea</code>, so each field can have <code>.get()</code> executed on it separately, which lets us not have to worry about the lifetime of <code>area</code>, even though we&rsquo;re using <code>.iter()</code> and not <code>.into_iter()</code> (for those of you who are already Rustaceans). So, all that expression means is that we&rsquo;re parsing a reference to the <code>time</code> field&rsquo;s value to a <i>component</i> called <code>Time</code> (it&rsquo;s convention in Sycamore, and most JS libraries as well, to capitalise the first letter of your component names) &#x2014; this will be responsible for rendering those time tuples, when we come to it.\\n</p>\\n\\n<p>\\nFinally, that last little <code>view!</code> macro at the bottom of our function defines the view we&rsquo;ll be returning, which just interpolates the <code>cv</code> value (which we can do, views can be slotted into other views easily). Chances are that you&rsquo;ll probably want to add some stuff around this, like a header, a footer, or maybe a picture of yourself, and perhaps your name, maybe an introduction &#x2014; heck, maybe you want to put in a flappy bird clone! Go crazy, all we&rsquo;re doing here is popping in that <code>cv</code> variable.\\n</p>\\n\\n<p>\\nFor now, let&rsquo;s keep going on our iteration journey by defining <code>projects</code>. Pop the following code in just above the <code>view!</code> macro in the previous codeblock:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-keyword\\">let</span> <span class=\\"org-variable-name\\">projects</span> = create_ref<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>cx, area.projects.get<span class=\\"org-rainbow-delimiters-depth-2\\">()</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span>;\\n<span class=\\"org-keyword\\">let</span> <span class=\\"org-variable-name\\">projects</span> = <span class=\\"org-type\\">View</span>::new_fragment<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>\\n    projects.iter<span class=\\"org-rainbow-delimiters-depth-2\\">()</span>\\n            .map<span class=\\"org-rainbow-delimiters-depth-2\\">(</span>|project| <span class=\\"org-rainbow-delimiters-depth-3\\">{</span>\\n                <span class=\\"org-keyword\\">let</span> <span class=\\"org-variable-name\\">achievements</span> = create_ref<span class=\\"org-rainbow-delimiters-depth-4\\">(</span>cx, project.achievements.get<span class=\\"org-rainbow-delimiters-depth-1\\">()</span><span class=\\"org-rainbow-delimiters-depth-4\\">)</span>;\\n                <span class=\\"org-keyword\\">let</span> <span class=\\"org-variable-name\\">achievements</span> = <span class=\\"org-type\\">View</span>::new_fragment<span class=\\"org-rainbow-delimiters-depth-4\\">(</span>\\n                    achievements.iter<span class=\\"org-rainbow-delimiters-depth-1\\">()</span>\\n                                .map<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>|achievement| <span class=\\"org-rainbow-delimiters-depth-2\\">{</span>\\n                                    <span class=\\"org-preprocessor\\">view!</span> <span class=\\"org-rainbow-delimiters-depth-3\\">{</span> cx,\\n                                        <span class=\\"org-comment-delimiter\\">// </span><span class=\\"org-comment\\">These can have styling, and they all come from</span>\\n                                        <span class=\\"org-comment-delimiter\\">// </span><span class=\\"org-comment\\">a trusted source</span>\\n                                        li<span class=\\"org-rainbow-delimiters-depth-4\\">(</span>class = <span class=\\"org-string\\">\\"cv-achievement\\"</span><span class=\\"org-rainbow-delimiters-depth-4\\">)</span> <span class=\\"org-rainbow-delimiters-depth-4\\">{</span>\\n                                            span<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>dangerously_set_inner_html = <span class=\\"org-rust-ampersand\\">&amp;</span>achievement.get<span class=\\"org-rainbow-delimiters-depth-2\\">()</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{}</span>\\n                                        <span class=\\"org-rainbow-delimiters-depth-4\\">}</span>\\n                                    <span class=\\"org-rainbow-delimiters-depth-3\\">}</span>\\n                                <span class=\\"org-rainbow-delimiters-depth-2\\">}</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span>\\n                                .collect<span class=\\"org-rainbow-delimiters-depth-1\\">()</span>\\n                <span class=\\"org-rainbow-delimiters-depth-4\\">)</span>;\\n\\n                <span class=\\"org-preprocessor\\">view!</span> <span class=\\"org-rainbow-delimiters-depth-4\\">{</span> cx,\\n                    div<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>class = <span class=\\"org-string\\">\\"cv-project-header\\"</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n                        a<span class=\\"org-rainbow-delimiters-depth-2\\">(</span>class = <span class=\\"org-string\\">\\"cv-project-name\\"</span>, href = project.link.get<span class=\\"org-rainbow-delimiters-depth-3\\">()</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span>\\n                            span <span class=\\"org-rainbow-delimiters-depth-3\\">{</span> <span class=\\"org-rainbow-delimiters-depth-4\\">(</span><span class=\\"org-rainbow-delimiters-depth-1\\">(</span>project.name.get<span class=\\"org-rainbow-delimiters-depth-2\\">()</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span><span class=\\"org-rainbow-delimiters-depth-4\\">)</span> <span class=\\"org-rainbow-delimiters-depth-3\\">}</span>\\n                            span<span class=\\"org-rainbow-delimiters-depth-3\\">(</span>style = <span class=\\"org-string\\">\\"font-style: italic;\\"</span><span class=\\"org-rainbow-delimiters-depth-3\\">)</span> <span class=\\"org-rainbow-delimiters-depth-3\\">{</span> <span class=\\"org-rainbow-delimiters-depth-4\\">(</span><span class=\\"org-rust-builtin-formatting-macro\\">format!</span><span class=\\"org-rainbow-delimiters-depth-1\\">(</span><span class=\\"org-string\\">\\" (</span><span class=\\"org-rust-string-interpolation\\">{}</span><span class=\\"org-string\\">)\\"</span>, project.status.get<span class=\\"org-rainbow-delimiters-depth-2\\">()</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span><span class=\\"org-rainbow-delimiters-depth-4\\">)</span> <span class=\\"org-rainbow-delimiters-depth-3\\">}</span>\\n                        <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>\\n                        p<span class=\\"org-rainbow-delimiters-depth-2\\">(</span>class = <span class=\\"org-string\\">\\"cv-time\\"</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span> <span class=\\"org-type\\">Time</span><span class=\\"org-rainbow-delimiters-depth-3\\">(</span><span class=\\"org-rust-ampersand\\">&amp;</span>project.time.get<span class=\\"org-rainbow-delimiters-depth-4\\">()</span><span class=\\"org-rainbow-delimiters-depth-3\\">)</span> <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>\\n                    <span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n                    h4<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>class = <span class=\\"org-string\\">\\"cv-project-role\\"</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span> <span class=\\"org-rainbow-delimiters-depth-2\\">(</span>project.role.get<span class=\\"org-rainbow-delimiters-depth-3\\">()</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span> <span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n                    p<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>dangerously_set_inner_html = <span class=\\"org-rust-ampersand\\">&amp;</span>project.description.get<span class=\\"org-rainbow-delimiters-depth-2\\">()</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{}</span>\\n                    ul<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>class = <span class=\\"org-string\\">\\"cv-achievement-list\\"</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n                        <span class=\\"org-rainbow-delimiters-depth-2\\">(</span>achievements<span class=\\"org-rainbow-delimiters-depth-2\\">)</span>\\n                    <span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n                <span class=\\"org-rainbow-delimiters-depth-4\\">}</span>\\n            <span class=\\"org-rainbow-delimiters-depth-3\\">}</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span>\\n            .collect<span class=\\"org-rainbow-delimiters-depth-2\\">()</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">)</span>;\\n</pre>\\n</div>\\n\\n<p>\\nWe&rsquo;ve actually just gone ahead here and thrown in the achievements as well, since they&rsquo;re pretty easy to do. Notice that, because we&rsquo;re doing another layer of iteration, we&rsquo;re using <code>create_ref</code> on the <code>area.projects</code> field, and then we&rsquo;re creating another concatenation of a list of <code>View&lt;G&gt;</code> objects, just like before &#x2014; nothing new there. All this means that <code>projects</code> will end up holding a <code>View&lt;G&gt;</code> we can interpolate, as we did in the previous codeblock. Ignoring the section that defines <code>achievements</code> for a second, the markup of each project is just a header with the name of the project as a link to wherever we specified, and then the time next to it. The contents have the role we had in the project, the description (again interpolated directly as HTML to preserve things like italics), and then an unordered list (i.e. bullet points) for all the great things we did during this project.\\n</p>\\n\\n<p>\\nEach achievement is just a string in our <code>.toml</code> files, so, fittingly, each one just translates to a list item (i.e. the <code>li</code> element in HTML), and we can do that with the code that defines <code>achievements</code>: again, it&rsquo;s the same process of using <code>create_ref</code> and then <code>View::new_fragment</code>, and each achievement just gets its own <code>li</code> with a <code>span</code> for the contents, directly interpolated to preserve formatting. Notice the comment here, which clarifies a few things about <code>dangerously_set_inner_html</code> (which, by the way, only takes references, hence the <code>&amp;</code> in front of <code>achievement.get()</code>): we should only ever use it when <i>we</i> control what&rsquo;s going to be in there. Do <b>not</b> ever, ever, ever put stuff users have provided into this property, because they might throw scripts in there! For example, let&rsquo;s say you turn this into a full-on social media site around CVs, and you let users specify their details in Markdown, which you then parse. If you don&rsquo;t also run a special <i>sanitiser</i> on that Markdown, they might have put some nifty little <code>&lt;script&gt;</code> tags in there, which are then going to be executed in the browser of every user who visits their page, all because you put their untrusted content in <code>dangerously_set_inner_html</code>. These are called <i>cross-site scripting attacks</i> (XSS), and they are seriously not fun. Here, though, it&rsquo;s fine to use this property, because it&rsquo;s your personal website, and you wrote the content in the <code>.toml</code> files. That said, if you were to let anyone edit those files, using this property would be a terrible idea (because anyone could abuse it to make your website unusable by, say, loading cryptominer tech into your users&rsquo; browsers). Alright, XSS rant over!\\n</p>\\n</div>\\n\\n<div id=\\"outline-container-org2f1cbc3\\" class=\\"outline-3\\">\\n<h3 id=\\"org2f1cbc3\\">Displaying the time</h3>\\n<div class=\\"outline-text-3\\" id=\\"text-org2f1cbc3\\">\\n<p>\\nNow, we&rsquo;ve got every little bit of this CV set up, which is pretty darn cool! However, we have a distinct problem, which is that, if you run this right now, <code>Time</code> is undefined. So, let&rsquo;s define it! Since this is to do with the CV itself, I would put this into the <code>cv</code> module like so:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\"><span class=\\"org-preprocessor\\">#</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">[</span></span><span class=\\"org-preprocessor\\">component</span><span class=\\"org-preprocessor\\"><span class=\\"org-rainbow-delimiters-depth-1\\">]</span></span>\\n<span class=\\"org-keyword\\">pub</span> <span class=\\"org-keyword\\">fn</span> <span class=\\"org-type\\">Time</span><span class=\\"org-rainbow-delimiters-depth-1\\">&lt;</span><span class=\\"org-variable-name\\">G</span>: <span class=\\"org-type\\">Html</span><span class=\\"org-rainbow-delimiters-depth-1\\">&gt;(</span><span class=\\"org-variable-name\\">cx</span>: <span class=\\"org-type\\">Scope</span>, <span class=\\"org-variable-name\\">time</span>: <span class=\\"org-rust-ampersand\\">&amp;</span><span class=\\"org-rainbow-delimiters-depth-2\\">(</span><span class=\\"org-type\\">CvTime</span>, <span class=\\"org-type\\">CvTime</span><span class=\\"org-rainbow-delimiters-depth-2\\">)</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span> -&gt; <span class=\\"org-type\\">View</span><span class=\\"org-rainbow-delimiters-depth-1\\">&lt;</span><span class=\\"org-type\\">G</span><span class=\\"org-rainbow-delimiters-depth-1\\">&gt;</span> <span class=\\"org-rainbow-delimiters-depth-1\\">{</span>\\n    <span class=\\"org-keyword\\">let</span> <span class=\\"org-variable-name\\">start</span> = <span class=\\"org-keyword\\">match</span> <span class=\\"org-rust-ampersand\\">&amp;</span>time.<span class=\\"org-highlight-numbers-number\\">0</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span>\\n        <span class=\\"org-type\\">CvTime</span>::<span class=\\"org-type\\">Present</span> =&gt; <span class=\\"org-string\\">\\"Present\\"</span>.to_string<span class=\\"org-rainbow-delimiters-depth-3\\">()</span>,\\n        <span class=\\"org-type\\">CvTime</span>::<span class=\\"org-type\\">Year</span><span class=\\"org-rainbow-delimiters-depth-3\\">(</span>year<span class=\\"org-rainbow-delimiters-depth-3\\">)</span> =&gt; year.to_string<span class=\\"org-rainbow-delimiters-depth-3\\">()</span>,\\n    <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>;\\n    <span class=\\"org-keyword\\">let</span> <span class=\\"org-variable-name\\">end</span> = <span class=\\"org-keyword\\">match</span> <span class=\\"org-rust-ampersand\\">&amp;</span>time.<span class=\\"org-highlight-numbers-number\\">1</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span>\\n        <span class=\\"org-type\\">CvTime</span>::<span class=\\"org-type\\">Present</span> =&gt; <span class=\\"org-string\\">\\"Present\\"</span>.to_string<span class=\\"org-rainbow-delimiters-depth-3\\">()</span>,\\n        <span class=\\"org-type\\">CvTime</span>::<span class=\\"org-type\\">Year</span><span class=\\"org-rainbow-delimiters-depth-3\\">(</span>year<span class=\\"org-rainbow-delimiters-depth-3\\">)</span> =&gt; year.to_string<span class=\\"org-rainbow-delimiters-depth-3\\">()</span>,\\n    <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>;\\n\\n    <span class=\\"org-preprocessor\\">view!</span> <span class=\\"org-rainbow-delimiters-depth-2\\">{</span> cx,\\n            span <span class=\\"org-rainbow-delimiters-depth-3\\">{</span>\\n                <span class=\\"org-rainbow-delimiters-depth-4\\">(</span>start<span class=\\"org-rainbow-delimiters-depth-4\\">)</span>\\n                span<span class=\\"org-rainbow-delimiters-depth-4\\">(</span>dangerously_set_inner_html = <span class=\\"org-string\\">\\"&amp;ndash;\\"</span><span class=\\"org-rainbow-delimiters-depth-4\\">)</span> <span class=\\"org-rainbow-delimiters-depth-4\\">{}</span>\\n                <span class=\\"org-rainbow-delimiters-depth-4\\">(</span>end<span class=\\"org-rainbow-delimiters-depth-4\\">)</span>\\n            <span class=\\"org-rainbow-delimiters-depth-3\\">}</span>\\n    <span class=\\"org-rainbow-delimiters-depth-2\\">}</span>\\n<span class=\\"org-rainbow-delimiters-depth-1\\">}</span>\\n</pre>\\n</div>\\n\\n<p>\\nAlright, let&rsquo;s go for another breakdown. The first thing we&rsquo;re doing is annotating our component function with the <code>#[component]</code> macro, which tells Sycamore to treat this function as&#x2026;well, a component. Right now, all this actually does behind the scenes is tells Rust that it&rsquo;s okay for you to have a function name that doesn&rsquo;t start with a lower case letter (Rust is fussy about that kind of thing), but, in the past, it&rsquo;s done much more, and it may well in the future (like enabling near-instant hot reloading, perhaps&#x2026;). The rest of this function is similar to what you might expect from a Perseus view function (because they were modelled on components!): it takes in a scope (without the fancy lifetimes though, since we&rsquo;re not using reactive state), and then a value, which is the property of the component. You can do all sorts of fancy stuff here, like define a <code>struct</code> that uses <code>#[derive(Prop)]</code> to let you do things like <code>MyComponent(color = \\"red\\", foo = true, bar = 5) { span { \\"Hello!\\" } }</code>, but, here, we just want the basics &#x2014; we&rsquo;ll take in a tuple of two <code>CvTime</code> values, and then we&rsquo;re literally just matching on them to either display <i>Present</i> or the year in question, and then we render those in a little <code>span</code>. If you&rsquo;re unfamiliar with HTML though, you&rsquo;re probably wondering what the heck that thing in the middle is: it&rsquo;s an <i>en dash</i> (i.e. –), which is longer than a hyphen, but shorter than an <i>em dash</i> (yes, these are real things, and these are what Word extends your hyphens between phrases to when you type the spacebar). In time ranges, an en dash is correct, so that&rsquo;s what we&rsquo;re using! With these kinds of non-bog-standard characters though, it&rsquo;s generally a good idea to use the HTML codes for them: in this case, <code>&amp;ndash;</code>, since otherwise the browser can get confused (especially if you&rsquo;re doing this with internationalization, which Perseus supports natively, because that involves inserting some wacky special characters to tell the browser whether the language in question is read left-to-right, like English, or right-to-left, like Arabic &#x2014; all this becomes a mess on the web, just use the HTML codes).\\n</p>\\n\\n<p>\\nAnyway, if you import that into the root of the <code>src/templates/index.rs</code> file with <code>use self::cv::Time</code>, your code should compile! But, how do we know if it does? More to the point, how can we run this app?\\n</p>\\n</div>\\n</div>\\n</div>\\n\\n<div id=\\"outline-container-orgcd9810d\\" class=\\"outline-2\\">\\n<h2 id=\\"orgcd9810d\\">Running it!</h2>\\n<div class=\\"outline-text-2\\" id=\\"text-orgcd9810d\\">\\n<p>\\nIn Perseus, you&rsquo;ve got the <code>perseus</code> CLI at your disposal for things like running your app, and debugging it while you build it. The first command you&rsquo;ll want to get cozy with is <code>perseus check -w</code>, which, as it says on the tin, <i>checks</i> your app: it doesn&rsquo;t compile it, it just checks if it&rsquo;s valid (which is a damn sight quicker than an all-out compilation). This is different from the usual <code>cargo check</code> that you&rsquo;d use in a Rust project in that it will automatically update when you change your code (that&rsquo;s the <code>-w</code>, which can be applied to almost all <code>perseus</code> commands), and in that it checks both the engine-side and the client-side of your app. Remember those <code>#[cfg(engine)]</code> tags? Well, the Perseus CLI is what provides the <code>--cfg=engine</code> to the Rust compiler that&rsquo;s needed to make this work. Because Rust views your app for the engine-side as <i>completely different</i> from your app for the client-side, Perseus separates the build artefacts for the two, and handles the separation of concerns in that magical <code>dist/</code> directory, so you can just get on with coding, and not have to worry about recompiling <i>everything</i> when you change from engine-side to client-side development.\\n</p>\\n\\n<p>\\nThe next command you&rsquo;ll use a lot is <code>perseus serve -w</code>, which will also watch your code for changes, but rather than checking it, it will compile and execute it, setting up a server to do so: that will then let you actually navigate to your app in a web browser, like we did at the very beginning of this tutorial (congrats on getting this far, by the way!). But, for this app, we haven&rsquo;t actually done anything that needs a server: we aren&rsquo;t doing anything at request-time (e.g. extracting cookies from the user&rsquo;s request and using them to influence the pages we generate, say for authentication), and we aren&rsquo;t doing any incremental generation or state revalidation (all <i>really cool</i> things you can do in Perseus that can supercharge your app), so all we actually need is a static site. In this case, we can use <code>perseus export -sw</code>, which isn&rsquo;t faster than <code>perseus serve -w</code>, but it will produce a series of static files, which, because of the <code>-s</code>, it will then auto-serve for us. In production, we can put these onto a host like GitHub Pages, or, heck, even Dropbox, and serve them as a static website, which is usually <i>much</i> cheaper than running a proper server. So, let&rsquo;s try it!\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-sh\\">perseus export -sw\\n</pre>\\n</div>\\n\\n<p>\\nChances are, you might get some errors here, maybe from a missing semicolon, or perhaps from a lifetime you missed, or maybe you misspelled the name of a macro, or maybe I can&rsquo;t write code and I made a glaring mistake in this post (please point it out in the comments, thank you!), but Perseus just invokes the Rust compiler, so you should be able to pretty easily fix your mistakes (it basically guides you through the process).\\n</p>\\n\\n<p>\\nOnce your app is compiling and building, you should have all green ticks, and you&rsquo;re good to go! Perseus will first <i>compile</i> your app, using Rust, and then it will execute the static generation functions you provided, like <code>get_build_state</code>, which could also produce errors, which the CLI would also report (e.g. if you haven&rsquo;t created the directory for your <code>.toml</code> files yet). But, when all that is fixed, you should have an app that builds! And, because of the guarantees of Rust, if your app builds, it probably works too.\\n</p>\\n\\n<p>\\nSo, navigate over to <a href=\\"http://localhost:8080\\">http://localhost:8080</a>, where Perseus serves your apps by default (configurable, of course), and see what you&rsquo;ve got! It&rsquo;ll probably look terrible, because we haven&rsquo;t done any styling yet, but it should at least display all the information in your CV correctly. If it does, let&rsquo;s get to styling this baby. And, you might as well keep that command running, since it will reload both your app, and the browser, whenever you change your code (and, since we added those <code>#[rx(hsr_ignore)]</code> lines, if you change the CV files themselves, your app will also update properly).\\n</p>\\n</div>\\n</div>\\n\\n<div id=\\"outline-container-orgde696a1\\" class=\\"outline-2\\">\\n<h2 id=\\"orgde696a1\\">Making it look pretty</h2>\\n<div class=\\"outline-text-2\\" id=\\"text-orgde696a1\\">\\n<p>\\nFor us to be able to style this, we first need some kind of styling system. A lot of people, myself included, use <a href=\\"https://tailwindcss.com\\">Tailwind</a> for this, but, to keep things open, we&rsquo;ll just use pure CSS here (derived from the implementation in Tailwind on my own site). To get that working, we&rsquo;ll need to import a stylesheet into our CV page, which can be done through the document metadata by adding this line after <code>title { .. }</code> in your <code>head</code> function:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-rust\\">link<span class=\\"org-rainbow-delimiters-depth-1\\">(</span>rel = <span class=\\"org-string\\">\\"stylesheet\\"</span>, href = <span class=\\"org-string\\">\\".perseus/static/cv.css\\"</span><span class=\\"org-rainbow-delimiters-depth-1\\">)</span>\\n</pre>\\n</div>\\n\\n<p>\\nNotice the lack of a leading <code>/</code> in this <code>href</code>, since Perseus inserts an HTML <code>&lt;base /&gt;</code> tag into your site automatically, meaning you can host it on relative paths (e.g. <code>mysite.com/cv-website</code>), and everything will still work. Adding a leading <code>/</code> would break this compatibility (but, if you&rsquo;re hosting on a domain directly, you don&rsquo;t need to worry about this).\\n</p>\\n\\n<p>\\nThe <code>.perseus/static</code> path is special, because it will contain the contents of the <code>static/</code> directory at the root of your project, if you have one: so, let&rsquo;s create that directory and throw a <code>cv.css</code> file inside! To check everything&rsquo;s working, try putting this inside:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-css\\"><span class=\\"org-css-selector\\">body</span> {\\n    <span class=\\"org-css-property\\">background-color</span>: <span class=\\"custom\\">red</span>;\\n}\\n</pre>\\n</div>\\n\\n<p>\\nWhen your app reloads, everything should be red now, and that means your CSS is being correctly imported. Here&rsquo;s a style-file for you that makes things look nice, which you&rsquo;re more than welcome to unpack (weird bits are commented), or change as you wish. Make sure to replace the background colour change from above with this (unless you <i>want</i> everything to be red, of course).\\n</p>\\n\\n<p>\\n#+begin<sub>src</sub> css\\n</p>\\n</div>\\n</div>\\n<div id=\\"outline-container-org498dc28\\" class=\\"outline-2\\">\\n<h2 id=\\"org498dc28\\">{</h2>\\n<div class=\\"outline-text-2\\" id=\\"text-org498dc28\\">\\n<p>\\n    margin: 0;\\n    padding: 0;\\n}\\n</p>\\n\\n<p>\\n.cv-wrapper-outer {\\n    /*\\n</p>\\n<ul class=\\"org-ul\\">\\n<li>Put whatever you like in here to make it integrate with your site,</li>\\n<li>here we&rsquo;re just making it centred.</li>\\n</ul>\\n<p>\\n    <b>/\\n    width: 100%;\\n    display: flex;\\n    flex-direction: column;\\n    align-items: center;\\n}\\n.cv-wrapper-inner {\\n    /</b> Good width for prose according to Tailwind <b>/\\n    max-width: 65ch;\\n}\\n.cv-area-wrapper {\\n    margin-top: 0.75rem;\\n    margin-bottom: 0.75rem;\\n}\\n.cv-area-header {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n    border-bottom: 1px solid black;\\n    padding-left: 1rem;\\n    padding-right: 1rem;\\n}\\n.cv-area-heading {\\n    font-size: 1.5rem;\\n    line-height: 2rem;\\n}\\n.cv-time {\\n    margin-left: 0.25rem;\\n}\\n.cv-content-wrapper {\\n    padding-left: 1rem;\\n    padding-right: 1rem;\\n}\\n/</b> Using Tailwind&rsquo;s definition of a medium-sized screen here <b>/\\n@media(min-width: 768px) {\\n    .cv-content-wrapper {\\n        margin-left: 0.5rem;\\n    }\\n}\\n.cv-area-role {\\n    color: #404040;\\n    font-style: italic;\\n    font-size: 1.25rem;\\n    line-height: 1.75rem;\\n}\\n.cv-project-header {\\n    display: flex;\\n    justify-content: space-between;\\n    align-items: center;\\n}\\n.cv-project-name {\\n    font-size: 1.25rem;\\n    line-height: 1.75rem;\\n    color: #3b82f6; /</b> Please change this to suit your site <b>/\\n    /</b> Let&rsquo;s make a little hover animation for the link colour <b>/\\n    transition-property: background-color, border-color, color, fill, stroke;\\n    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\\n    transition-duration: 150ms;\\n}\\n.cv-project-name:hover {\\n    color: #60a5fa; /</b> Please change this to suit your site */\\n}\\n.cv-project-role {\\n    color: #404040;\\n    font-style: italic;\\n    font-size: 1.125rem;\\n    line-height: 1.75rem;\\n}\\n.cv-achievement-list {\\n    list-style-type: disc;\\n}\\n.cv-achievement {\\n    margin-left: 1.75rem;\\n}\\n#+end<sub>src</sub>\\n</p>\\n\\n<p>\\nAnd, with that, you should have something that looks like this!\\n</p>\\n\\n<p>\\n[TODO screenshot]\\n</p>\\n</div>\\n</div>\\n\\n<div id=\\"outline-container-orgc3b264c\\" class=\\"outline-2\\">\\n<h2 id=\\"orgc3b264c\\">Deploying it!</h2>\\n<div class=\\"outline-text-2\\" id=\\"text-orgc3b264c\\">\\n<p>\\nFinally, before you go, let&rsquo;s <i>deploy</i> this site of yours to GitHub Pages (free for public repositories). Create a new GitHub repo in your own account and name it whatever you like. Then, upload everything you&rsquo;ve done to that repo (GitHub has excellent instructions for this if you&rsquo;re new to Git), and then create a file in <code>.github/workflows/deploy.yml</code>, with these contents:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-yaml\\"><span class=\\"org-variable-name\\">name</span>: Build and Publish Site\\n<span class=\\"org-variable-name\\">on</span>:\\n    <span class=\\"org-variable-name\\">push</span>:\\n        <span class=\\"org-variable-name\\">branches</span>:\\n            - main\\n\\n<span class=\\"org-variable-name\\">jobs</span>:\\n    <span class=\\"org-variable-name\\">build</span>:\\n        <span class=\\"org-variable-name\\">runs-on</span>: ubuntu-20.04\\n        <span class=\\"org-variable-name\\">steps</span>:\\n            - <span class=\\"org-variable-name\\">uses</span>: actions/checkout@v2\\n\\n            - <span class=\\"org-variable-name\\">name</span>: Install Dependencies\\n              <span class=\\"org-variable-name\\">run</span>: cargo install perseus-cli --version 0.4.0-beta.21\\n\\n            - <span class=\\"org-variable-name\\">name</span>: Build site\\n              <span class=\\"org-variable-name\\">run</span>: perseus deploy -e\\n              <span class=\\"org-variable-name\\">env</span>:\\n                <span class=\\"org-comment-delimiter\\"># </span><span class=\\"org-comment\\">Update this with your details so Perseus can host your site correctly</span>\\n                <span class=\\"org-variable-name\\">PERSEUS_BASE_PATH</span>: https://&lt;your-username&gt;.github.io/&lt;repo-name&gt;\\n\\n            - <span class=\\"org-variable-name\\">name</span>: Deploy site to GitHub Pages\\n              <span class=\\"org-variable-name\\">uses</span>: peaceiris/actions-gh-pages@v3\\n              <span class=\\"org-variable-name\\">if</span>: github.ref == <span class=\\"org-string\\">'refs/heads/main'</span>\\n              <span class=\\"org-variable-name\\">with</span>:\\n                  <span class=\\"org-variable-name\\">github_token</span>: \${{ secrets.GITHUB_TOKEN }}\\n                  <span class=\\"org-variable-name\\">publish_dir</span>: pkg\\n</pre>\\n</div>\\n\\n<p>\\nThis will be our GitHub Actions workflow for building your app in release mode and sending it off to GitHub Pages!\\n</p>\\n\\n<p>\\nIf you&rsquo;re unfamiliar with GHA workflows, don&rsquo;t worry too much about this: it just runs whenever you push a new commit to the <code>main</code> branch of your repo, installs the Perseus CLI, and then runs the magic command:\\n</p>\\n\\n<div class=\\"org-src-container\\">\\n<pre class=\\"src src-sh\\">perseus deploy -e\\n</pre>\\n</div>\\n\\n<p>\\nYep, that&rsquo;s all you need to deploy your brand-new app to a series of static files that can be hosted on any file hosting provider! Importantly, GitHub Pages will host your site by default at <code>https://&lt;your-username&gt;.github.io/&lt;repo-name&gt;</code>, which means it will be hosted at a <i>relative path</i> (i.e. not at the root of the <code>&lt;your-username&gt;.github.io</code> domain). This means any paths will have to have that prefixed to them, which, in some cases, could mean major changes to your app, but fear not! Perseus will <i>automatically</i> take this into account during deployment, as long as you provide it with a base URL where everything will be hosted. If you were using <code>perseus deploy</code>, which will produce a <code>pkg/server</code> binary, then you would provide this environment variable when you <i>run</i> the server, but, since we&rsquo;re exporting (that&rsquo;s the <code>-e</code> flag), we&rsquo;ll provide it at compile-time (since there is no server to actually run, and this kind of info has to be hardcoded). This is done through the <code>PERSEUS_BASE_PATH</code> environment variable, the value of which you should update when you create your workflow file. A telltale sign that you&rsquo;ve misconfigured this is if your site is uninteractive, and if there are errors in the browser console saying Perseus couldn&rsquo;t find things like <code>bundle.wasm</code> (where all your app&rsquo;s logic ends up).\\n</p>\\n\\n<p>\\nMeanwhile, the actual deployment of the <code>pkg/</code> directory (where <code>perseus deploy</code> puts everything by default) is handled by a nifty little action called <code>actions-gh-pages</code>, which does exactly what it says on the tin: takes the given directory, and populates the <code>gh-pages</code> branch with it. This means your <code>main</code> branch doesn&rsquo;t get polluted with any artefacts from <code>pkg/</code>: they all get transferred into a dedicated branch that you can tell GitHub to host for you.\\n</p>\\n\\n<p>\\nAssuming your repository is public, or if you&rsquo;re a GitHub Pro user, then you can pop into your repo&rsquo;s settings and go to the <i>Pages</i> section, which will let you pick a branch to deploy from: select <code>gh-pages</code>, and, a few moments later, your site should be ready! From here on, that workflow will ensure that, every time you push a commit to your site, it will be rebuilt for production and hosted on GitHub Pages! The default URL will be <code>https://&lt;your-github-username&gt;.github.io/&lt;repo-name&gt;</code>, but you can change this if you own any other domains (GitHub has some great documentation on how to do this).\\n</p>\\n\\n<p>\\nOf course, if you want to deploy your static files to another provider, like Vercel or Netlify, you can do that as well! Anyone who accepts static files will work (although Netlify has had problems with the <code>/.perseus</code> URL on exported apps in the past, so you might have better luck with Vercel).\\n</p>\\n</div>\\n</div>\\n\\n<div id=\\"outline-container-orgd5c6d0b\\" class=\\"outline-2\\">\\n<h2 id=\\"orgd5c6d0b\\">Conclusion</h2>\\n<div class=\\"outline-text-2\\" id=\\"text-orgd5c6d0b\\">\\n<p>\\nBuilding a website in Rust is an experience for those who haven&rsquo;t worked with it before: you have to wrangle with references, lifetimes, the borrow checker, the rest of the compiler, and, if you&rsquo;re coming from JS, even static typing can be a bit of a shock. Sycamore aims to make using Rust for building website views fairly painless, and Perseus builds on it to provide a comprehensive state generation system that allows you to do stuff like we&rsquo;ve just done: take some <code>.toml</code> files, parse them at build-time, and interpolate them into your Sycamore views. In this post, we used <i>reactive state</i>, which wasn&rsquo;t required for this use-case (and using unreactive state would simplify things), but doing so allows us to look at reactivity in Perseus, lifetimes, and application-level caching, together with a little explanation of how Perseus&rsquo; hot state reloading system works.\\n</p>\\n\\n<p>\\nAll in all, Perseus is a fantastic framework for building small, robust websites, as well as massive, state-heavy applications, all while maintaining ludicrous speed and excellent ergonomics (although, if you&rsquo;re new to Rust, things take a while to get used to). Now that you&rsquo;ve deployed your little CV website, try pointing <a href=\\"https://pagespeed.web.dev/\\">this tool</a> at it, and it will produce a score out of 100 based on Google&rsquo;s <i>Lighthouse</i> metrics, which are commonly used to judge the performance of webpages. If you&rsquo;ve followed these instructions correctly, you should have a 100 score on desktop easily, and a score well above 90 on mobile (Perseus doesn&rsquo;t do quite as well on mobile, because Google tests with simulations of devices that aren&rsquo;t optimised to run Wasm: real-world clients on more modern phones (in the Western world, at least) will usually have desktop-level speeds). If you have any problems with any of this, feel free to leave a comment on this post, and, if you&rsquo;d like to learn more about Perseus, check out its website <a href=\\"https://framesurge.sh/perseus/en-US\\">here</a> (which is, of course, built with Perseus).\\n</p>\\n\\n<p>\\nHappy coding!\\n</p>\\n\\n<p>\\n<i>Disclaimer: I am the maintainer of Perseus, give it a star!</i>\\n</p>\\n</div>\\n</div>","date":"2023-03-01","description":"A crash-course in Rust web development using Perseus to create a custom CV website.","id":"7adca2f7-ab95-41e1-8d0d-4bbc020ca018","series":null,"tags":["programming","rust","webdev","tutorial","perseus","css"],"title":"Learn Rust Webdev by Creating a Custom CV Site","toc":"<div id=\\"table-of-contents\\" role=\\"doc-toc\\">\\n\\n<div id=\\"text-table-of-contents\\" role=\\"doc-toc\\">\\n<ul>\\n<li><a href=\\"post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org66494c3\\">Getting started with Perseus</a></li>\\n<li><a href=\\"post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org0c4adca\\">Building a CV system</a>\\n<ul>\\n<li><a href=\\"post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org0e7f215\\">Bringing it to life</a></li>\\n<li><a href=\\"post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org05d6fb4\\">Getting it to Perseus</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org9425050\\">Displaying it to the user</a>\\n<ul>\\n<li><a href=\\"post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org2f1cbc3\\">Displaying the time</a></li>\\n</ul>\\n</li>\\n<li><a href=\\"post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#orgcd9810d\\">Running it!</a></li>\\n<li><a href=\\"post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#orgde696a1\\">Making it look pretty</a></li>\\n<li><a href=\\"post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org498dc28\\">{</a></li>\\n<li><a href=\\"post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#orgc3b264c\\">Deploying it!</a></li>\\n<li><a href=\\"post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#orgd5c6d0b\\">Conclusion</a></li>\\n</ul>\\n</div>\\n</div>"}`;
window.__PERSEUS_INITIAL_WIDGET_STATES = `{}`;
window.__PERSEUS_TRANSLATIONS = ``;</script><meta itemprop=__perseus_head_end><script>//</script><body class="bg-black text-white"><div id=root><header data-hk=1.11 class="w-full mb-20 backdrop-blur-lg {}"><div data-hk=1.12 class="sm:p-2 flex justify-between xl:justify-center items-center"><a data-hk=1.13 class="justify-self-start self-center m-3 ml-5 text-lg sm:text-xl text-bold title-font"href=/>The Arctic Site</a><div data-hk=1.14 class="xl:w-[38rem] 2xl:w-[55rem] 3xl:w-[70rem]"></div><div data-hk=1.15 class="md:hidden m-3 mr-5 tham tham-e-spin tham-w-6"><div data-hk=1.16 class=tham-box><div data-hk=1.17 class="tham-inner bg-white"></div></div></div><nav data-hk=1.18 class="hidden md:flex"><ul data-hk=1.19 class="mr-5 flex"><li data-hk=2.0 class="m-3 p-1"><a data-hk=2.1 href>Home</a><li data-hk=2.2 class="m-3 p-1"><a data-hk=2.3 href=about>About</a><li data-hk=2.4 class="m-3 p-1"><a data-hk=2.5 href=posts>The Arctic Circle</a><li data-hk=2.6 class="m-3 p-1"><a data-hk=2.7 href=shortform>The Ice Floes</a></ul></nav></div><nav data-hk=1.20 id=mobile_nav_menu class="sm:p-2 md:hidden w-full text-center justify-center hidden"><ul data-hk=1.21 class=mr-5><li data-hk=3.0 class="m-3 p-1"><a data-hk=3.1 href>Home</a><li data-hk=3.2 class="m-3 p-1"><a data-hk=3.3 href=about>About</a><li data-hk=3.4 class="m-3 p-1"><a data-hk=3.5 href=posts>The Arctic Circle</a><li data-hk=3.6 class="m-3 p-1"><a data-hk=3.7 href=shortform>The Ice Floes</a></ul></nav></header><main data-hk=1.22 class="mt-14 xs:mt-16 sm:mt-20 lg:mt-24"><div data-hk=1.0 class="flex flex-col lg:flex-row-reverse justify-center items-center w-full px-4 sm:px-8 lg:px-10"><h1 data-hk=1.1 class="text-4xl my-3 lg:hidden">Learn Rust Webdev by Creating a Custom CV Site</h1><nav data-hk=1.2 class="styled-prose lg:sticky self-start top-14 xs:top-16 sm:top-20 lg:top-24 max-w-md max-h-[63vh] overflow-y-auto border-l border-neutral-600 pl-4 lg:mx-4 py-3"><div data-hk=1.3 class=max-w-sm><div id=table-of-contents role=doc-toc><div id=text-table-of-contents role=doc-toc><ul><li><a href=post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org66494c3>Getting started with Perseus</a><li><a href=post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org0c4adca>Building a CV system</a> <ul><li><a href=post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org0e7f215>Bringing it to life</a><li><a href=post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org05d6fb4>Getting it to Perseus</a></ul><li><a href=post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org9425050>Displaying it to the user</a> <ul><li><a href=post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org2f1cbc3>Displaying the time</a></ul><li><a href=post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#orgcd9810d>Running it!</a><li><a href=post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#orgde696a1>Making it look pretty</a><li><a href=post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#org498dc28>{</a><li><a href=post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#orgc3b264c>Deploying it!</a><li><a href=post/7adca2f7-ab95-41e1-8d0d-4bbc020ca018#orgd5c6d0b>Conclusion</a></ul></div></div></div></nav><div data-hk=1.4 class=min-w-0><h1 data-hk=1.5 class="text-4xl my-3 text-center hidden lg:block">Learn Rust Webdev by Creating a Custom CV Site</h1><div data-hk=1.6 class="styled-prose lg:max-w-3xl xl:max-w-4xl 2xl:max-w-5xl min-w-0 min-h-0 mb-6"><p><i>A note to those in the United States, and other parts of the world: I will use the terms CV and resumé interchangeably here, as they are used this way in Australia to refer to a document more similar to the American conception of a CV.</i><p>A little while ago, I found myself needing to submit a CV as a formality for a casual admin position I’d been offered, which led me to a realisation: formatting a CV is actually quite the task! I had one from a while ago at the ready, but it needed a little updating, and, me being me, I just <i>had</i> to update the whole thing to look much nicer, because heaven forbid I submit a CV that didn’t look superbly aesthetically pleasing to an organisation that had already offered me a position…<p>Anyway, I found a number of neat little solutions, most notably <a href=https://github.com/fresh-standard/fresh-resume-schema>Fresh</a>, although the templates weren’t ideal, and JSON is a horrible format for human beings, so I ended up having to convert from TOML into JSON, and then the PDF renderer wasn’t working properly, so I had to render to HTML and then save as a PDF, and the whole process was just a bit annoying. That said, I did end up with something quite nice that I was happy to submit. But, I thought, I can definitely make this better.<p>So, that’s what I’ve done! If you’d like to have a look at the final product, check out <a href=https://arctic-hen7.github.io/about>the about page</a> of this very website! It’s not replete with all the details I would submit to an actual employer, since this is the internet, and I do like to have some privacy, but nontheless, it provides a good guide of what I’ll wlak you through building. And, naturally, we’re going to do this in <a href=https://rust-lang.org>Rust</a>, because it is a <i>fantastic</i> language with <i>amazing</i> support for building super-fast websites! The framework we’ll use to do this is <a href=https://framesurge.sh/perseus/en-US>Perseus</a>, which I created back in 2021, and which I maintain today.<div id=outline-container-org66494c3 class=outline-2><h2 id=org66494c3>Getting started with Perseus</h2><div class=outline-text-2 id=text-org66494c3><p>To kick things off, we’ll need a new Perseus site. If you’ve already got one, you can skip this stage.<p>First off, assuming you’ve <a href=https://rust-lang.org/tools/install>installed Rust</a>, run this command to get the latest beta version of Perseus:<div class=org-src-container><pre class="src src-sh">cargo install perseus-cli --version 0.4.0-beta.21
</pre></div><p>Once that’s done, <code>cd</code> into a directory you want to put your project’s folder in, and then run these commands to create yourself a new template project:<div class=org-src-container><pre class="src src-sh">perseus new cv-website
<span class=org-type>cd</span> cv-website
perseus build
</pre></div><p>Replace <code>cv-website</code> here with whatever you want to call your site’s crate (this doesn’t impact anything else at all except the folder name and a metadata property in <code>Cargo.toml</code>). If you open <a href=http://localhost:8080>http://localhost:8080</a> now, you should find an introductory page welcoming you to Perseus, which you can change the contents of to see things update automatically! If you’re working on an older machine, you might want to follow <a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/compilation-times>these instructions</a> on how to improve Perseus compilation times by using an experimental compiler backend (perfectly safe, and up to 70% faster than normal <code>rustc</code>!).<p>Next up, we’ll need to add an engine-only dependency so we can parse our CV from TOML into a format Perseus can use to build our site, for which we’ll use the <a href=https://docs.rs/toml><code>toml</code></a> package. By making this an engine-only dependency, Perseus will automatically exclude it from our Wasm bundle, making compilation times faster, and keeping the size of the bundle you need to send to your users as small as possible. You can do this by adding this to the section of your <code>Cargo.toml</code> that begins with <code>[target.'cfg(engine)'.dependencies]</code> (that <code>cfg(engine)</code> is pretty self-explanatory):<div class=org-src-container><pre class="src src-toml"><span class=org-variable-name>toml</span> = <span class=org-string>"0.7"</span>
<span class=org-variable-name>thiserror</span> = <span class=org-string>"1"</span> <span class=org-comment-delimiter># </span><span class=org-comment>We'll need this later...</span>
</pre></div><p><i>The <code>0.7</code> here is the latest version of the <code>toml</code> crate at the time of writing.</i><p>Now we’ll need to create a Perseus template for handling our CV, which you can do wherever you like. For instance, on this website, it’s in the <code>about</code> template, which creates the <code>about</code> page (for more about Perseus’ distinction between pages and templates, see <a href=https://framesurge.sh/perseus/en-US/docs/next/core-principles>this page</a>), but, if you’re just making this site to handle your CV and nothing else, you might want to put it in the <code>index</code> template. These templates typically have one file each in the <code>src/templates/</code> directory at the root of your project, and, for the rest of this tutorial, I’ll assume you’re creating your CV in the <code>index</code> template (special in Perseus, as it denotes the landing page of your site). If you used <code>perseus new</code> as above, then you should have something like the following in there (if not, add it for now, and we’ll work from it):<div class=org-src-container><pre class="src src-rust"><span class=org-keyword>use</span> <span class=org-constant>perseus</span>::<span class=org-constant>prelude</span>::*;
<span class=org-keyword>use</span> <span class=org-constant>sycamore</span>::<span class=org-constant>prelude</span>::*;

<span class=org-keyword>fn</span> <span class=org-function-name>index_page</span><span class=org-rainbow-delimiters-depth-1><</span><span class=org-variable-name>G</span>: <span class=org-type>Html</span><span class=org-rainbow-delimiters-depth-1>>(</span><span class=org-variable-name>cx</span>: <span class=org-type>Scope</span><span class=org-rainbow-delimiters-depth-1>)</span> -> <span class=org-type>View</span><span class=org-rainbow-delimiters-depth-1><</span><span class=org-type>G</span><span class=org-rainbow-delimiters-depth-1>></span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-preprocessor>view!</span> <span class=org-rainbow-delimiters-depth-2>{</span> cx,
        <span class=org-comment-delimiter>// </span><span class=org-comment>Don't worry, there are much better ways of styling in Perseus!</span>
        div<span class=org-rainbow-delimiters-depth-3>(</span>style = <span class=org-string>"display: flex; flex-direction: column; justify-content: center; align-items: center; height: 95vh;"</span><span class=org-rainbow-delimiters-depth-3>)</span> <span class=org-rainbow-delimiters-depth-3>{</span>
            h1 <span class=org-rainbow-delimiters-depth-4>{</span> <span class=org-string>"Welcome to Perseus!"</span> <span class=org-rainbow-delimiters-depth-4>}</span>
            p <span class=org-rainbow-delimiters-depth-4>{</span>
                <span class=org-string>"This is just an example app. Try changing some code inside "</span>
                code <span class=org-rainbow-delimiters-depth-1>{</span> <span class=org-string>"src/templates/index.rs"</span> <span class=org-rainbow-delimiters-depth-1>}</span>
                <span class=org-string>" and you'll be able to see the results here!"</span>
            <span class=org-rainbow-delimiters-depth-4>}</span>
        <span class=org-rainbow-delimiters-depth-3>}</span>
    <span class=org-rainbow-delimiters-depth-2>}</span>
<span class=org-rainbow-delimiters-depth-1>}</span>

<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>engine_only_fn</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>fn</span> <span class=org-function-name>head</span><span class=org-rainbow-delimiters-depth-1>(</span><span class=org-variable-name>cx</span>: <span class=org-type>Scope</span><span class=org-rainbow-delimiters-depth-1>)</span> -> <span class=org-type>View</span><span class=org-rainbow-delimiters-depth-1><</span><span class=org-type>SsrNode</span><span class=org-rainbow-delimiters-depth-1>></span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-preprocessor>view!</span> <span class=org-rainbow-delimiters-depth-2>{</span> cx,
        title <span class=org-rainbow-delimiters-depth-3>{</span> <span class=org-string>"Welcome to Perseus!"</span> <span class=org-rainbow-delimiters-depth-3>}</span>
    <span class=org-rainbow-delimiters-depth-2>}</span>
<span class=org-rainbow-delimiters-depth-1>}</span>

<span class=org-keyword>pub</span> <span class=org-keyword>fn</span> <span class=org-function-name>get_template</span><span class=org-rainbow-delimiters-depth-1><</span><span class=org-variable-name>G</span>: <span class=org-type>Html</span><span class=org-rainbow-delimiters-depth-1>>()</span> -> <span class=org-type>Template</span><span class=org-rainbow-delimiters-depth-1><</span><span class=org-type>G</span><span class=org-rainbow-delimiters-depth-1>></span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-type>Template</span>::build<span class=org-rainbow-delimiters-depth-2>(</span><span class=org-string>"index"</span><span class=org-rainbow-delimiters-depth-2>)</span>.view<span class=org-rainbow-delimiters-depth-2>(</span>index_page<span class=org-rainbow-delimiters-depth-2>)</span>.head<span class=org-rainbow-delimiters-depth-2>(</span>head<span class=org-rainbow-delimiters-depth-2>)</span>.build<span class=org-rainbow-delimiters-depth-2>()</span>
<span class=org-rainbow-delimiters-depth-1>}</span>
</pre></div><p>The Perseus docs go over what all this sort of stuff means very well <a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/generating-pages>here</a>, but we’ll cover it anyway now for brevity. The first two lines just import the preludes of Perseus and <a href=https://github.com/sycamore-rs/sycamore>Sycamore</a>, the library Perseus uses for reactivite primitives and view creation (as React is to NextJS, Sycamore is to Perseus, for those from the JS world), and then we define the <code>index_page</code> function, which returns a <code>View&LTG></code>, where that <code>&LTG></code> means it’s <i>generic</i> over the view backend, which is Rust’s way of expressing that this function can be rendered to any environment that has the <code>Html</code> trait (e.g. it can be rendered on the server-side, in the browser, or in <a href=https://framesurge.sh/perseus/en-US/docs/next/fundamentals/hydration>hydration</a>). This function takes a single argument for the <code>Scope</code> of the page it will generate, which is what lets you tie together all your reactive primitives. When this scope is destroyed, your page will be removed, and everything will be cleaned up neatly. Next, we use the <code>view!</code> macro, from Sycamore, to define the actual view of our page, in an HTML-like syntax that takes a bit of getting used to, but, to be honest, I really like it! Since this is an example app from Perseus itself, there’s no styling library, so this code is doing all the styling manually, but don’t worry, we’ll fix that up later.<p>The next thing this does is define a <code>head</code> function, which is used to define the <code>&LThead></code> of this page (the document metadata, like the title, etc.). This also takes a <code>Scope</code>, but it always returns a <code>View&LTSsrNode></code>, since Perseus intelligently prerenders document metadata on the server-side (or, in our case, at build-time). That <code>#[engine_only_fn]</code> macro is saying to Rust that the function should only be defined when <code>#[cfg(engine)]</code> (a Rust conditional compilation predicate) is true, and it should be a dummy function on the client-side. This means we can use engine-only dependencies here without them polluting our client-side code, and this is how Perseus clearly distinguishes functions that will only be defined on the server from those that will only be defined on the client (and this distinction is enforced by the compiler, so your site won’t even build if you accidentally mix things up, and you’ll get a nice error message). All this function is actually doing is defining a little title for our page.<p>Then, we have the public function that we’ll use to actually define our app (to learn more about what <code>src/main.rs</code> is doing, since we won’t need to touch it in this tutorial, see <a href=https://framesurge.sh/perseus/en-US/docs/next/first-app/defining>here</a>), and that returns a Perseus <code>Template&LTG></code> (again, generic over the rendering backend, like our <code>View&LTG></code> from earlier). This template is called <code>index</code>, which Perseus recognises as the landing page of our site, and then we define the view as the <code>index_page</code> function, with the <code>head</code> function for the metadata, and then we call <code>.build()</code> to bring it all together.</div></div><div id=outline-container-org0c4adca class=outline-2><h2 id=org0c4adca>Building a CV system</h2><div class=outline-text-2 id=text-org0c4adca><p>With all the preamble out of the way, let’s get to work on this thing! Before we can get to displaying anything though, we’ll need to actually have a system to parse some human-readable data from your filesystem so Rust, and by extension Perseus, can understand it and use it. For this, we need to define a <i>schema</i> for our data, which is the structure that we’ll expect it to have. Since this is Rust, if you make a mistake in your CV definition, there will be an error, which we’ll tell Perseus to propagate up and return to us on the command-line, so you know exactly what has gone wrong.<p>To begin, let’s keep things clean by defining a new module in our <code>src/templates/index.rs</code> file by adding the following:<div class=org-src-container><pre class="src src-rust"><span class=org-keyword>mod</span> <span class=org-constant>cv</span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-comment-delimiter>// </span><span class=org-comment>...</span>
<span class=org-rainbow-delimiters-depth-1>}</span>
</pre></div><p>Now, let’s take a look at an example TOML file for what we want to write. Of course, you can modify this in any way you like, and adding new properties is fairly trivial once you’ve got all this done.<div class=org-src-container><pre class="src src-toml"><span class=org-variable-name>name</span> = <span class=org-string>""</span>
<span class=org-variable-name>role</span> = <span class=org-string>""</span>
<span class=org-variable-name>description</span> = <span class=org-string>""</span>
<span class=org-variable-name>time</span> = [ <span class=org-string>"2023"</span>, <span class=org-string>"Present"</span> ] <span class=org-comment-delimiter># </span><span class=org-comment>As an example</span>

[[<span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type><span class=org-type>projects</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>]]
<span class=org-variable-name>name</span> = <span class=org-string>""</span>
<span class=org-variable-name>role</span> = <span class=org-string>""</span>
<span class=org-variable-name>status</span> = <span class=org-string>""</span>
<span class=org-variable-name>time</span> = [ <span class=org-string>"2023"</span>, <span class=org-string>"Present"</span> ]
<span class=org-variable-name>link</span> = <span class=org-string>"https://example.com"</span>
<span class=org-variable-name>description</span> = <span class=org-string>""</span>
<span class=org-variable-name>achievements</span> = []
</pre></div><p>If we several of these files, which represent <i>areas</i> of our life, then each area has some projects in it, which all have their own details, and then some particular achievements. This could be represented by the following Rust schema, which we’ll put in that <code>mod cv</code>:<div class=org-src-container><pre class="src src-rust"><span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>derive</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>Serialize, Deserialize</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>pub</span> <span class=org-keyword>struct</span> <span class=org-type>Cv</span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-keyword>pub</span> <span class=org-variable-name>areas</span>: <span class=org-type>Vec</span><span class=org-rainbow-delimiters-depth-2><</span><span class=org-type>CvArea</span><span class=org-rainbow-delimiters-depth-2>></span>,
<span class=org-rainbow-delimiters-depth-1>}</span>

<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>derive</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>Serialize, Deserialize</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>pub</span> <span class=org-keyword>struct</span> <span class=org-type>CvArea</span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-keyword>pub</span> <span class=org-variable-name>name</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>role</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>description</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>time</span>: <span class=org-rainbow-delimiters-depth-2>(</span><span class=org-type>CvTime</span>, <span class=org-type>CvTime</span><span class=org-rainbow-delimiters-depth-2>)</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>projects</span>: <span class=org-type>Vec</span><span class=org-rainbow-delimiters-depth-2><</span><span class=org-type>CvProject</span><span class=org-rainbow-delimiters-depth-2>></span>,
<span class=org-rainbow-delimiters-depth-1>}</span>

<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>derive</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>Serialize, Deserialize</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>serde</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>untagged</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>pub</span> <span class=org-keyword>enum</span> <span class=org-type>CvTime</span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-comment-delimiter>// </span><span class=org-comment>This has to be a string because of TOML parsing requirements unfortunately</span>
    <span class=org-type>Year</span><span class=org-rainbow-delimiters-depth-2>(</span><span class=org-type>String</span><span class=org-rainbow-delimiters-depth-2>)</span>,
    <span class=org-type>Present</span>,
<span class=org-rainbow-delimiters-depth-1>}</span>

<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>derive</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>Serialize, Deserialize</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>pub</span> <span class=org-keyword>struct</span> <span class=org-type>CvProject</span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-keyword>pub</span> <span class=org-variable-name>name</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>role</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>status</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>time</span>: <span class=org-rainbow-delimiters-depth-2>(</span><span class=org-type>CvTime</span>, <span class=org-type>CvTime</span><span class=org-rainbow-delimiters-depth-2>)</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>link</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>description</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>achievements</span>: <span class=org-type>Vec</span><span class=org-rainbow-delimiters-depth-2><</span><span class=org-type>String</span><span class=org-rainbow-delimiters-depth-2>></span>,
<span class=org-rainbow-delimiters-depth-1>}</span>
</pre></div><p>This is all pretty self-explanatory if you’re familiar with Rust, but some odd bits for those who aren’t might be <code>Vec&LTT></code>, which is what we use in Rust to represent a list with elements of type <code>T</code>, and the <code>#[derive(Serialize, Deserialize)]</code> annotations: these are <i>derive macros</i> that ask Rust to use the code from the <code>serde</code> library to automatically implement functions to allow us to turn these representations of our CV into and out of strings. Strings in what format? Well, that can be defined by another library, like <code>serde_json</code> or, in our case, <code>toml</code>! (First-class support for serialization and deserialization through the <code>serde</code> crate is one of the most remarkable features of Rust, especially for those coming from other low-level languages.) To be able to do this though, we’ll need to add this to the top of our <code>cv</code> module (<i>not</i> the file, because the module is semantically separate):<div class=org-src-container><pre class="src src-rust"><span class=org-keyword>use</span> <span class=org-constant>serde</span>::<span class=org-rainbow-delimiters-depth-1>{</span><span class=org-type>Deserialize</span>, <span class=org-type>Serialize</span><span class=org-rainbow-delimiters-depth-1>}</span>;
</pre></div><p>This just imports the two macros we’ll need to make this all work.<p>One final thing to note about all this code is that <code>#[serde(untagged)]</code> macro over <code>CvTime</code> (which, by the way, is an <code>enum</code>, which is Rust’s way of representing a type that can be in one of several states, like <code>Result&LTT, E></code>, which can be <code>Ok(T)</code> or <code>Err(E)</code>): this tells Serde to not expect any tagging of what <i>variant</i> of this enum to expect. Without this, we couldn’t do something like <code>[ "2023", "Present" ]</code>, we’d have to explicitly specify that <code>"2023"</code> is a year, which, in this case, is overly verbose and a little pointless.</div><div id=outline-container-org0e7f215 class=outline-3><h3 id=org0e7f215>Bringing it to life</h3><div class=outline-text-3 id=text-org0e7f215><p>So now we have a schema, but we want it to make it reactive. Now, we could use unreactive state here, since it’s never going to change, and that would probably be the smarter idea in general, but that won’t show off Perseus’ reactive collections nearly as well as making it all reactive would! Granted, this does add some overhead we don’t actually need at all, but it’s not really going to slow anything down, and it seems cooler to have everything be <i>reactive</i>, doesn’t it? If you want to make it all unreactive, like a sensible developer, that is left <i>as an exercise to the reader</i>. (Read: at least 30% of the point of this post is to show off the cool stuff Perseus can do, and it’d be a bit remiss of me to skip the reactive state system.)<p>To do this, we just need to derive <code>ReactiveState</code>, which we can find in the <code>perseus::prelude</code> module, so let’s import that at the start of <code>=mod cv</code> with this code:<div class=org-src-container><pre class="src src-rust"><span class=org-keyword>use</span> <span class=org-constant>perseus</span>::<span class=org-constant>prelude</span>::*;
</pre></div><p>Now let’s change all those <code>#[derive(..)]</code> macros to this:<div class=org-src-container><pre class="src src-rust"><span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>derive</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>Serialize, Deserialize, Clone, ReactiveState</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
</pre></div><p>We also need to add <code>Clone</code> here to satisfy a few internal requirements of Perseus. You can skip the <code>ReactiveState</code> part of this on the <code>enum CvTime</code>, since there’s not really much point in making it reactive when everything above it already is. But you might be wondering why we’re not just making the top-level <code>struct Cv</code> reactive, and the reason for this is that we’re going to use <i>nested reactive state</i>, which lets you do crazy things like <code>state.areas.get()</code>, rather than <code>state.get().areas</code>, which makes <i>lifetimes</i> (a confusing, but incredibly powerful feature of Rust) cleaner, and it generally makes your code much neater. We can make things nested by adding <code>#[rx(nested)]</code> in a few places, which does…well, exactly what you’d expect. Here’s what you should end up with:<div class=org-src-container><pre class="src src-rust"><span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>derive</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>Serialize, Deserialize, Clone, ReactiveState</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>pub</span> <span class=org-keyword>struct</span> <span class=org-type>Cv</span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>[</span></span><span class=org-preprocessor>rx</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-3>(</span></span><span class=org-preprocessor>nested</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-3>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>]</span></span>
    <span class=org-keyword>pub</span> <span class=org-variable-name>areas</span>: <span class=org-type>RxVecNested</span><span class=org-rainbow-delimiters-depth-2><</span><span class=org-type>CvArea</span><span class=org-rainbow-delimiters-depth-2>></span>,
<span class=org-rainbow-delimiters-depth-1>}</span>

<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>derive</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>Serialize, Deserialize, Clone, ReactiveState</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>pub</span> <span class=org-keyword>struct</span> <span class=org-type>CvArea</span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-keyword>pub</span> <span class=org-variable-name>name</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>role</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>description</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>time</span>: <span class=org-rainbow-delimiters-depth-2>(</span><span class=org-type>CvTime</span>, <span class=org-type>CvTime</span><span class=org-rainbow-delimiters-depth-2>)</span>,
    <span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>[</span></span><span class=org-preprocessor>rx</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-3>(</span></span><span class=org-preprocessor>nested</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-3>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>]</span></span>
    <span class=org-keyword>pub</span> <span class=org-variable-name>projects</span>: <span class=org-type>RxVecNested</span><span class=org-rainbow-delimiters-depth-2><</span><span class=org-type>CvProject</span><span class=org-rainbow-delimiters-depth-2>></span>,
<span class=org-rainbow-delimiters-depth-1>}</span>

<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>derive</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>Serialize, Deserialize, Clone</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>serde</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>untagged</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>pub</span> <span class=org-keyword>enum</span> <span class=org-type>CvTime</span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-comment-delimiter>// </span><span class=org-comment>This has to be a string because of TOML parsing requirements unfortunately</span>
    <span class=org-type>Year</span><span class=org-rainbow-delimiters-depth-2>(</span><span class=org-type>String</span><span class=org-rainbow-delimiters-depth-2>)</span>,
    <span class=org-type>Present</span>,
<span class=org-rainbow-delimiters-depth-1>}</span>

<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>derive</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>Serialize, Deserialize, Clone, ReactiveState</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>pub</span> <span class=org-keyword>struct</span> <span class=org-type>CvProject</span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-keyword>pub</span> <span class=org-variable-name>name</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>role</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>status</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>time</span>: <span class=org-rainbow-delimiters-depth-2>(</span><span class=org-type>CvTime</span>, <span class=org-type>CvTime</span><span class=org-rainbow-delimiters-depth-2>)</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>link</span>: <span class=org-type>String</span>,
    <span class=org-keyword>pub</span> <span class=org-variable-name>description</span>: <span class=org-type>String</span>,
    <span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>[</span></span><span class=org-preprocessor>rx</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-3>(</span></span><span class=org-preprocessor>nested</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-3>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>]</span></span>
    <span class=org-keyword>pub</span> <span class=org-variable-name>achievements</span>: <span class=org-type>RxVec</span><span class=org-rainbow-delimiters-depth-2><</span><span class=org-type>String</span><span class=org-rainbow-delimiters-depth-2>></span>,
<span class=org-rainbow-delimiters-depth-1>}</span>
</pre></div><p>But, hang on a minute, what the heck is <code>RxVecNested</code>? And what about <code>RxVec</code>? What’s the difference? Where did these come from??<p>Well, dear reader, these are <i>reactive collections</i>: types Perseus provides natively that make your life much easier when working with lists (and maps) in reactive state types. We’ll need to import them though, since they are <i>not</i> in <code>perseus::prelude</code>, so add this to the top of <code>mod cv</code>:<div class=org-src-container><pre class="src src-rust"><span class=org-keyword>use</span> <span class=org-constant>perseus</span>::<span class=org-constant>state</span>::<span class=org-constant>rx_collections</span>::<span class=org-rainbow-delimiters-depth-1>{</span><span class=org-type>RxVec</span>, <span class=org-type>RxVecNested</span><span class=org-rainbow-delimiters-depth-1>}</span>;
</pre></div><p>We’ll see how these collections work in a minute when we start using all this stuff to display things to our users, but, first, let’s make a brief clarification about the difference between <code>RxVec</code> and <code>RxVecNested</code>: the former is what you’d put something like a <code>String</code> in, and it makes its elements reactive by just throwing them inside Sycamore’s <code>RcSignal</code> type. The latter is what you’d use for a type that has its own fields, as it will call the <code>.make_rx()</code> method on each of its elements (that method is created automatically for us when we derive <code>ReactiveState</code> — nifty, eh?).<p>Now, let’s create a function that will create an instance of all this from a directory full of <code>.toml</code> files. On my site, I put these in a <code>resume/</code> folder at the root of the site, but you could put them on a post-quantum floppy disk if you want.<p>Since we’re working with Rust, we may as well make this a method on <code>Cv</code> itself, but it’s important to ask ourselves where we’ll need this method: on the engine, the client, or both? The answer is just the engine, since we’ll parse these files into our <code>struct Cv</code>, and <i>that’s</i> what Perseus will send to our users’ browsers, which our code can work with directly. This is great, because it means we don’t have to worry about browser filesystems, getting <code>toml</code> into the browser, or anything else. To make this clear, and to make our code compile, we’ll annotate whatever we do with <code>#[cfg(engine)]</code>, which tells Rust to simply delete whatever we do from our code when we compile it for the browser. Here’s our code:<div class=org-src-container><pre class="src src-rust"><span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>cfg</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>engine</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>impl</span> <span class=org-type>Cv</span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-comment-delimiter>// </span><span class=org-comment>This will not examine subdirectories</span>
    <span class=org-keyword>pub</span> <span class=org-keyword>fn</span> <span class=org-function-name>from_directory</span><span class=org-rainbow-delimiters-depth-2>(</span><span class=org-variable-name>path</span>: <span class=org-rust-ampersand>&</span><span class=org-type>str</span><span class=org-rainbow-delimiters-depth-2>)</span> -> <span class=org-type>Result</span><span class=org-rainbow-delimiters-depth-2><</span><span class=org-type>Self</span>, <span class=org-type>Error</span><span class=org-rainbow-delimiters-depth-2>></span> <span class=org-rainbow-delimiters-depth-2>{</span>
        <span class=org-keyword>use</span> <span class=org-constant>std</span>::fs;

        <span class=org-keyword>let</span> <span class=org-keyword>mut</span> <span class=org-variable-name>areas</span> = <span class=org-type>Vec</span>::new<span class=org-rainbow-delimiters-depth-3>()</span>;

        <span class=org-keyword>for</span> <span class=org-variable-name>entry</span> <span class=org-keyword>in</span> <span class=org-constant>fs</span>::read_dir<span class=org-rainbow-delimiters-depth-3>(</span>path<span class=org-rainbow-delimiters-depth-3>)</span>.map_err<span class=org-rainbow-delimiters-depth-3>(</span><span class=org-type>Error</span>::from<span class=org-rainbow-delimiters-depth-3>)</span><span class=org-rust-question-mark>?</span> <span class=org-rainbow-delimiters-depth-3>{</span>
            <span class=org-keyword>let</span> <span class=org-variable-name>entry</span> = entry.map_err<span class=org-rainbow-delimiters-depth-4>(</span><span class=org-type>Error</span>::from<span class=org-rainbow-delimiters-depth-4>)</span><span class=org-rust-question-mark>?</span>;

            <span class=org-keyword>if</span> entry.metadata<span class=org-rainbow-delimiters-depth-4>()</span>.map_err<span class=org-rainbow-delimiters-depth-4>(</span><span class=org-type>Error</span>::from<span class=org-rainbow-delimiters-depth-4>)</span><span class=org-rust-question-mark>?</span>.is_file<span class=org-rainbow-delimiters-depth-4>()</span>
                && entry.file_name<span class=org-rainbow-delimiters-depth-4>()</span>.to_string_lossy<span class=org-rainbow-delimiters-depth-4>()</span>.ends_with<span class=org-rainbow-delimiters-depth-4>(</span><span class=org-string>".toml"</span><span class=org-rainbow-delimiters-depth-4>)</span>
            <span class=org-rainbow-delimiters-depth-4>{</span>
                <span class=org-keyword>let</span> <span class=org-variable-name>contents</span> = <span class=org-constant>fs</span>::read_to_string<span class=org-rainbow-delimiters-depth-1>(</span>entry.path<span class=org-rainbow-delimiters-depth-2>()</span><span class=org-rainbow-delimiters-depth-1>)</span>.map_err<span class=org-rainbow-delimiters-depth-1>(</span><span class=org-type>Error</span>::from<span class=org-rainbow-delimiters-depth-1>)</span><span class=org-rust-question-mark>?</span>;
                <span class=org-keyword>let</span> <span class=org-variable-name>parsed</span>: <span class=org-type>CvArea</span> = <span class=org-constant>toml</span>::from_str<span class=org-rainbow-delimiters-depth-1>(</span><span class=org-rust-ampersand>&</span>contents<span class=org-rainbow-delimiters-depth-1>)</span>.map_err<span class=org-rainbow-delimiters-depth-1>(</span><span class=org-type>Error</span>::from<span class=org-rainbow-delimiters-depth-1>)</span><span class=org-rust-question-mark>?</span>;
                areas.push<span class=org-rainbow-delimiters-depth-1>(</span>parsed<span class=org-rainbow-delimiters-depth-1>)</span>;
            <span class=org-rainbow-delimiters-depth-4>}</span>
        <span class=org-rainbow-delimiters-depth-3>}</span>

        <span class=org-type>Ok</span><span class=org-rainbow-delimiters-depth-3>(</span><span class=org-type>Self</span> <span class=org-rainbow-delimiters-depth-4>{</span>
            <span class=org-variable-name>areas</span>: areas.into<span class=org-rainbow-delimiters-depth-1>()</span>,
        <span class=org-rainbow-delimiters-depth-4>}</span><span class=org-rainbow-delimiters-depth-3>)</span>
    <span class=org-rainbow-delimiters-depth-2>}</span>
<span class=org-rainbow-delimiters-depth-1>}</span>
</pre></div><p>This code might look a bit gnarly, but it’s actually really simple. We’re just using the <code>std::fs::read_dir</code> function to read through all the files at the top-level of our target directory, specified through the <code>path</code> argument, which will be interpreted relative to the root of our project, which means we can’t organise our files by folders, but that would be fairly trivial to implement with a library like <a href=https://docs.rs/walkdir>this</a>. We need to handle the fact that each entry in the directory might be unable to be accessed though, or the entire directory may be inaccessible, hence all that <code>.map_err()?</code> stuff, which we’ll come to. We’re also ignoring any folders, or any files that aren’t <code>.toml</code>, and we’re assuming that all files in our directory have UTF-8 names (this is the <code>.to_string_lossy()</code> method, since Rust strings must be UTF-8). If we find a file that matches though, we’ll read its contents, and convert them into a <code>CvArea</code> with the <code>toml::from_str</code> method (yeah, it’s that easy). If you don’t know what all those <code>&</code> characters mean, you’re in for a world of fun with Rust, and you should probably take a look at <a href=https://doc.rust-lang.org/stable/book/>the Rust book</a>! Finally, we’re using the <code>.into()</code> method to convert <code>areas</code> the <code>Vec&LTCvArea></code> into the unreactive version of an <code>RxVecNested&LTCvArea></code>. This method is automatically provided for convenience.<p>Now let’s come to the error handling in this method, which is a bit unique: we’re converting everything into the type <code>Error</code>, which we haven’t defined yet, using some kind of magical <code>Error::from</code> function, which appears to take as an argument an error of any kind. This is the preferred pattern at the moment for Perseus error handling when we’re generating the state we’ll use in our views: we create an error type that encompasses everything in our app, and then we use something like a <code>::from()</code> associated function to convert everything into that. The reasoning for this will become clear in a little while. Let’s pop over to <code>src/main.rs</code> and drop the following code at the bottom, to define <code>Error</code>:<div class=org-src-container><pre class="src src-rust"><span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>cfg</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>engine</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>derive</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>thiserror::Error, Debug</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>error</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>transparent</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>pub</span> <span class=org-keyword>struct</span> <span class=org-type>Error</span><span class=org-rainbow-delimiters-depth-1>(</span><span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>[</span></span><span class=org-preprocessor>from</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>]</span></span> <span class=org-type>Box</span><span class=org-rainbow-delimiters-depth-2><</span><span class=org-keyword>dyn</span> <span class=org-constant>std</span>::<span class=org-constant>error</span>::<span class=org-type>Error</span> + <span class=org-type>Send</span> + <span class=org-type>Sync</span><span class=org-rainbow-delimiters-depth-2>></span><span class=org-rainbow-delimiters-depth-1>)</span>;
<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>cfg</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>engine</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>impl</span> <span class=org-type>Error</span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>[</span></span><span class=org-preprocessor>inline</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>]</span></span>
    <span class=org-keyword>fn</span> <span class=org-function-name>from</span><span class=org-rainbow-delimiters-depth-2><</span><span class=org-variable-name>E</span>: <span class=org-constant>std</span>::<span class=org-constant>error</span>::<span class=org-type>Error</span> + <span class=org-type>Send</span> + <span class=org-type>Sync</span> + '<span class=org-keyword>static</span><span class=org-rainbow-delimiters-depth-2>>(</span><span class=org-variable-name>value</span>: <span class=org-type>E</span><span class=org-rainbow-delimiters-depth-2>)</span> -> <span class=org-type>Self</span> <span class=org-rainbow-delimiters-depth-2>{</span>
        <span class=org-type>Error</span><span class=org-rainbow-delimiters-depth-3>(</span>value.into<span class=org-rainbow-delimiters-depth-4>()</span><span class=org-rainbow-delimiters-depth-3>)</span>
    <span class=org-rainbow-delimiters-depth-2>}</span>
<span class=org-rainbow-delimiters-depth-1>}</span>
</pre></div><p>Here, we’re using <code>thiserror</code>, a helpful crate that allows us to define our own error types easily, which it will then integrate with Rust. You could handle implementing the <code>std::error::Error</code> trait manually, but <code>thiserror</code> is simpler, and we only need all this on the engine-side anyway (since it’s only needed for state generation). The contents of our <code>struct Error</code> are a <code>Box&LTdyn std::error::Error></code>, which you shouldn’t worry too much about if you’re new to Rust: it basically means that this can store <i>anything</i> that implements the <code>std::error::Error</code> trait, which is almost any error from any Rust library worth its salt. We use the <code>#[from]</code> helper macro in there so we can call <code>.into()</code> on any <code>Box</code> with an error inside to turn it into this error, and we use <code>#[error(transparent)]</code> to defer to the underlying error in the <code>Box</code> when we need to produce an error message. Finally, we create a manual <code>from</code> function that will take any error type (the <code>'static</code> makes sure we don’t accept references to errors, since we only want owned types), which calls the <code>.into()</code> method implicit from our earlier <code>#[from]</code> macro use. Pretty much, this lets us take anything that returns a <code>Result&LTT, E></code> (meaning it was either a success of type <code>T</code> or an error of type <code>E</code>) and call <code>.map_err(Error::from)</code> to turn <code>E</code> into our <code>Error</code> type. We can then use the <code>?</code> operator to automatically return the error if we encounter it, terminating our function (a useful but of syntactic sugar Rust provides us with for brevity). All this means we can unify any errors we get (since <code>std::fs::read_dir</code> has a different error type from <code>toml::from_str</code>, as an example) into one type, which makes things <i>much</i> easier when we’re working with Perseus.<p>You’ll then want to add <code>use crate::Error;</code> (annotated with a <code>#[cfg(engine)]</code>!) to the top of <code>mod cv</code> back in <code>src/templates/index.rs</code>.</div></div><div id=outline-container-org05d6fb4 class=outline-3><h3 id=org05d6fb4>Getting it to Perseus</h3><div class=outline-text-3 id=text-org05d6fb4><p>Now for the amusingly simple bit: getting our CV into Perseus. Since we have <code>Cv::from_dir</code> all implemented, we can just crate a wrapper function over that that satisfies Perseus, and then we’re good. To do that, add this function to <code>src/templates/index.rs</code>, but <i>not</i> in the <code>mod cv</code>!<div class=org-src-container><pre class="src src-rust"><span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>engine_only_fn</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>async</span> <span class=org-keyword>fn</span> <span class=org-function-name>get_build_state</span><span class=org-rainbow-delimiters-depth-1>(</span><span class=org-variable-name>_</span>: <span class=org-type>StateGeneratorInfo</span><span class=org-rainbow-delimiters-depth-2><</span><span class=org-rainbow-delimiters-depth-3>()</span><span class=org-rainbow-delimiters-depth-2>></span><span class=org-rainbow-delimiters-depth-1>)</span> -> <span class=org-type>Result</span><span class=org-rainbow-delimiters-depth-1><</span><span class=org-type>IndexState</span>, <span class=org-type>BlamedError</span><span class=org-rainbow-delimiters-depth-2><</span><span class=org-type>Error</span><span class=org-rainbow-delimiters-depth-2>></span><span class=org-rainbow-delimiters-depth-1>></span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-keyword>let</span> <span class=org-variable-name>cv</span> = <span class=org-constant>cv</span>::<span class=org-type>Cv</span>::from_directory<span class=org-rainbow-delimiters-depth-2>(</span><span class=org-string>"cv"</span><span class=org-rainbow-delimiters-depth-2>)</span><span class=org-rust-question-mark>?</span>;

    <span class=org-type>Ok</span><span class=org-rainbow-delimiters-depth-2>(</span><span class=org-type>IndexState</span> <span class=org-rainbow-delimiters-depth-3>{</span> cv <span class=org-rainbow-delimiters-depth-3>}</span><span class=org-rainbow-delimiters-depth-2>)</span>
<span class=org-rainbow-delimiters-depth-1>}</span>
</pre></div><p>This <code>get_build_state</code> function is what we’d typically call the function that Perseus will call to generate state at build-time for our page. This will be called when we run <code>perseus build</code>, <code>perseus serve</code>, <code>perseus export</code>, etc., and then Perseus will automatically cache whatever it generates for later use, minimising the amount of work that has to be done when requests start to come in, and dramatically speeding up your app in many cases. This function is <code>async</code>, since Perseus will let us do all sorts of advanced things in here in parallel with the rest of our build-time state generator functions, and it takes a single argument with some information about the context we’re building in, like the path we’re building for, and the locale it’s in if we’re making a multilingual app. We aren’t, and we know we’re on the landing page, so we don’t need any of that stuff, hence the <code>_</code> variable name to ignore it. You should change the <code>"cv"</code> directory to wherever you’re putting your CV files, relative to the root of your project.<p>Then we return a <code>Result&LTIndexState, BlamedError&LTError>></code>, which is a bit complex. First off, we need to define <code>IndexState</code>, which is the state type our page will expect. This will be a thin wrapper over <code>Cv</code>. In fact you could use <code>Cv</code> directly here, but we’ll keep things separate for readability. Pop this in the root of the <code>src/templates/index.rs</code> file:<div class=org-src-container><pre class="src src-rust"><span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>derive</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>Serialize, Deserialize, Clone, ReactiveState</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>rx</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>alias = </span><span class=org-string>"IndexStateRx"</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>rx</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>(</span></span><span class=org-preprocessor>hsr_ignore</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>struct</span> <span class=org-type>IndexState</span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>[</span></span><span class=org-preprocessor>rx</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-3>(</span></span><span class=org-preprocessor>nested</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-3>)</span></span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-2>]</span></span>
    <span class=org-variable-name>resume</span>: <span class=org-constant>cv</span>::<span class=org-type>Cv</span>,
<span class=org-rainbow-delimiters-depth-1>}</span>
</pre></div><p>Note that you’ll also need to add <code>use serde::{Deserialize, Serialize};</code> to the top of your <code>src/templates/index.rs</code> file to make this work.<p>This is pretty similar to what we’ve seen before: just creating a reactive state type that uses nested reactivity with our <code>resume</code>, but we’re also adding two extra helper macros so Perseus can do some more cool stuff: we use <code>#[rx(alias = "IndexStateRx")]</code> so we can directly reference the reactive version of <code>IndexState</code> (which itself will stay unreactive, since Perseus creates a whole new <code>struct</code> when we derive <code>ReactiveState</code>). We also add <code>#[rx(hsr_ignore)]</code> so that the state of this page will be left out of Perseus’ <i>hot state reloading</i> system, which is what Perseus uses to keep your app in a constant state between reloads. When you change some code, Perseus will cache the current state of your app, reload the page, and then restore the old state. However, if you’ve changed that state itself, rather than the code (e.g. fixing a typo in one of those <code>.toml</code> files), then Perseus will still overwrite that with the old state unless you manually reload the page. This is annoying, and can be avoided by telling Perseus that we want to opt out of HSR on this particular page. Using unreactive state from the start would make this implicit, but, again, that is left as <i>an exercise to the reader</i>.<p>Now let’s come back to that <code>BlamedError&LTError></code> error type of our <code>get_build_state</code> function: this means that we return the blamed version of our <code>Error</code> type (which you’ll need to import in the root of the file as well with <code>use crate::Error;</code>), which Perseus uses to distinguish errors caused by client misbehaviour from those caused by genuine server errors. But, you might ask, this function runs at build-time, how could a client possibly manipulate it? Well, you’d be right! But Perseus doesn’t know that before it inspects your app, because there’s another feature of Perseus that lets you build pages in a template <i>on-demand</i>, meaning the <code>get_build_state</code> function can sometimes actually be executed before a request, in which case the client can provide a bogus path, whcih would be blamed on them. In those kinds of cases, we probably want 404 errors rather than 500s, because bogus data from clients doesn’t constitute a server error. Again, none of this is a concern in our app, but Perseus needs us to provide a <code>BlamedError</code> all the same.<p>So how are our <code>Error</code> types getting turned into <code>BlamedError</code> types? The <code>?</code> operator! It implicitly performs a <code>.into()</code> transform when necessary, and anything implementing <code>std::error::Error</code> can be converted into a <code>BlamedError</code>! But this is also the reason why we need to convert everything into an <code>Error</code> first in <code>Cv::from_directory</code>: because <code>?</code> can only perform one layer of conversions, not two, and because we need to specify a singular error type for our function to return. This means those <code>Error::from</code> calls are required for functions that have multiple types of errors that they need to deal with. Part of the rationale for this is also actually security, because any errors generated on the server should not necessarily just be blindly returned, because they will get to the client in a lot of cases, and you probably don’t want to have 404 errors that allow a client to enumerate the directory structure of your server…</div></div></div><div id=outline-container-org9425050 class=outline-2><h2 id=org9425050>Displaying it to the user</h2><div class=outline-text-2 id=text-org9425050><p>Alright, we’ve done enough schema work! Let’s get to actually displaying all this to users of our site now. To do that, let’s start by updating our <code>get_template</code> function to this:<div class=org-src-container><pre class="src src-rust"><span class=org-keyword>pub</span> <span class=org-keyword>fn</span> <span class=org-function-name>get_template</span><span class=org-rainbow-delimiters-depth-1><</span><span class=org-variable-name>G</span>: <span class=org-type>Html</span><span class=org-rainbow-delimiters-depth-1>>()</span> -> <span class=org-type>Template</span><span class=org-rainbow-delimiters-depth-1><</span><span class=org-type>G</span><span class=org-rainbow-delimiters-depth-1>></span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-type>Template</span>::build<span class=org-rainbow-delimiters-depth-2>(</span><span class=org-string>"index"</span><span class=org-rainbow-delimiters-depth-2>)</span>
        .view_with_state<span class=org-rainbow-delimiters-depth-2>(</span>index_page<span class=org-rainbow-delimiters-depth-2>)</span>
        .head<span class=org-rainbow-delimiters-depth-2>(</span>head<span class=org-rainbow-delimiters-depth-2>)</span>
        .build_state_fn<span class=org-rainbow-delimiters-depth-2>(</span>get_build_state<span class=org-rainbow-delimiters-depth-2>)</span>
        .build<span class=org-rainbow-delimiters-depth-2>()</span>
<span class=org-rainbow-delimiters-depth-1>}</span>
</pre></div><p>This is fairly self-explanatory: it’s the same as what we had before (and you’ll need to change the template name again if you’re using a different page for your CV), just changing <code>.view()</code> to <code>.view_with_state()</code>, which instead accepts a view function that takes in our state (defined as <code>IndexState</code> earlier). We’re leaving the head the same, and we’re also adding <code>.build_state_fn()</code>, which we’re giving our build state function (<code>get_build_state</code>) so Perseus knows about it, and can execute it at build-time. Unlike with a lot of JS frameworks, there are no magical function names that you just export: Perseus makes sure you know what’s going on at all times by asking you to explicitly tell it what your state generation functions are.<p>Next, you might as well change the title of your page, which can be done in the <code>head</code> fucntion from before (I trust you to figure this one out…).<p>Now, everything comes down to the <code>index_page</code> function, which we’ll redefine as follows:<div class=org-src-container><pre class="src src-rust"><span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>auto_scope</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>fn</span> <span class=org-function-name>index_page</span><span class=org-rainbow-delimiters-depth-1><</span><span class=org-variable-name>G</span>: <span class=org-type>Html</span><span class=org-rainbow-delimiters-depth-1>>(</span><span class=org-variable-name>cx</span>: <span class=org-type>Scope</span>, <span class=org-type>IndexStateRx</span> <span class=org-rainbow-delimiters-depth-2>{</span> resume <span class=org-rainbow-delimiters-depth-2>}</span>: <span class=org-rust-ampersand>&</span><span class=org-type>IndexStateRx</span><span class=org-rainbow-delimiters-depth-1>)</span> -> <span class=org-type>View</span><span class=org-rainbow-delimiters-depth-1><</span><span class=org-type>G</span><span class=org-rainbow-delimiters-depth-1>></span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-preprocessor>view!</span> <span class=org-rainbow-delimiters-depth-2>{</span> cx,
        <span class=org-comment-delimiter>// </span><span class=org-comment>...</span>
    <span class=org-rainbow-delimiters-depth-2>}</span>
<span class=org-rainbow-delimiters-depth-1>}</span>
</pre></div><p>This has a few new things in it from our old function. We’ve replaced the contents we’re rendering with a placeholder for now, and we’re still taking in a <code>Scope</code> and returning a <code>View&LTG></code>, where <code>G</code> satisfies the <code>Html</code> trait, but we’re also taking in a type <code>IndexStateRx</code>, which you’ll remember we defined as the name of the reactive version of our <code>struct IndexState</code>, which stores our resume! This is just using some fancy Rust destructuring syntax that JS developers will probably be familiar with, so that we can get the <code>resume</code> property out straight away. We could just as easily have taken <code>state: &IndexStateRx</code> and then written <code>let resume = &state.resume;</code>, but this is quicker.<p>The tricky thing to understand here is that <code>#[auto_scope]</code> (which we wouldn’t need if we’d been using unreactive state, which is simpler), which is one of the most complicated things in Perseus for people who are new to Rust. I mentioned <i>lifetimes</i> earlier, and these are how Rust keeps track of when it should dispose of variables to stop the program from running out of memory very quickly indeed, and the lifetimes for Perseus pages are a little convoluted: each page has its own lifetime, and all those lifetimes fall <i>within</i> the lifetime of the entire app. This can be expressed through the lifetimes on the <code>cx</code> variable as a <code>BoundedScope<'app, 'page></code> (a <code>Scope</code> that lives as long as <code>'page</code>, with context available from <code>'app</code>). Perseus also caches our reactive state at the app-level so we can get back to pages we’ve already been to literally instantly (an example of app-level caching, which Perseus was the first to implement at a framework-level, making your life <i>much</i> easier), but it hands us a <i>reference</i> to that state that will only live as long as our page, so that we can’t accidentally create effects on our state that will outlive our page. In fact, there used to be a bug in Perseus where, if you tried to listen for when there was going to be a page change, those event listeners outlived your pages, meaning they kept on accumulating, leading to some very interesting console outputs! Today, this is long fixed, and Perseus is careful to make sure these kinds of errors are much harder to make. In short, the state we take in is <code>&'page IndexStateRx</code>, meaning it’s a reference to the reactive state that lives as long as the page.<p>You could write all this out manually, but, because it’s the same for every Perseus page, and because lifetimes are hard, Perseus provides the <code>#[auto_scope]</code> macro, which lets you omit all the lifetimes and use a <code>Scope</code> rather than a <code>BoundedScope</code>. Basically, that macro lets you be lazy and fixes your code for you. You can avoid it if you’d like, and you can learn more about it <a href=https://docs.rs/perseus/0.4.0-beta.18/perseus/prelude/attr.auto_scope.html>here</a>.<p>Alright, with that tangent out of the way, let’s actually display our CV already! Let’s start off with just getting the markup (i.e. HTML) right, before we handle making it look pretty.<p>So, when we think about how our CV is structured, we probably want to display it something like this:<ul class=org-ul><li>Area 1 <ul class=org-ul><li>Project 1 <ul class=org-ul><li>Achievements</ul><li>Project 2 <ul class=org-ul><li>Achievements</ul></ul><li>Area 2<li>etc.</ul><p>To do this, we’re going to need to do three levels of iteration: we’ll need to iterate over the areas, then we’ll need to iterate over the projects in each area, and finally over the achievements in each project. This might sound daunting, but Rust and Sycamore actually make this really easy: you can take a list of, say, areas, and <i>turn that into</i> a list of views that display them with the <code>.map()</code> function! So, let’s start with the areas by using this code inside the body of <code>index_page</code> (replacing the <code>view! { cx, }</code> etc.):<div class=org-src-container><pre class="src src-rust"><span class=org-keyword>let</span> <span class=org-variable-name>areas</span> = create_ref<span class=org-rainbow-delimiters-depth-1>(</span>cx, cv.areas.get<span class=org-rainbow-delimiters-depth-2>()</span><span class=org-rainbow-delimiters-depth-1>)</span>;
<span class=org-keyword>let</span> <span class=org-variable-name>resume</span> = <span class=org-type>View</span>::new_fragment<span class=org-rainbow-delimiters-depth-1>(</span>
    areas.iter<span class=org-rainbow-delimiters-depth-2>()</span>
         .map<span class=org-rainbow-delimiters-depth-2>(</span>|area| <span class=org-rainbow-delimiters-depth-3>{</span>
             <span class=org-preprocessor>view!</span> <span class=org-rainbow-delimiters-depth-4>{</span> cx,
                 div<span class=org-rainbow-delimiters-depth-1>(</span>class = <span class=org-string>"cv-area-wrapper"</span><span class=org-rainbow-delimiters-depth-1>)</span> <span class=org-rainbow-delimiters-depth-1>{</span>
                    <span class=org-comment-delimiter>// </span><span class=org-comment>Header</span>
                     div<span class=org-rainbow-delimiters-depth-2>(</span>class = <span class=org-string>"cv-area-header"</span><span class=org-rainbow-delimiters-depth-2>)</span> <span class=org-rainbow-delimiters-depth-2>{</span>
                         h3<span class=org-rainbow-delimiters-depth-3>(</span>class = <span class=org-string>"cv-area-heading"</span><span class=org-rainbow-delimiters-depth-3>)</span> <span class=org-rainbow-delimiters-depth-3>{</span>
                             <span class=org-rainbow-delimiters-depth-4>(</span>area.name.get<span class=org-rainbow-delimiters-depth-1>()</span><span class=org-rainbow-delimiters-depth-4>)</span>
                         <span class=org-rainbow-delimiters-depth-3>}</span>
                         p<span class=org-rainbow-delimiters-depth-3>(</span>class = <span class=org-string>"cv-time"</span><span class=org-rainbow-delimiters-depth-3>)</span> <span class=org-rainbow-delimiters-depth-3>{</span> <span class=org-type>Time</span><span class=org-rainbow-delimiters-depth-4>(</span><span class=org-rust-ampersand>&</span>area.time.get<span class=org-rainbow-delimiters-depth-1>()</span><span class=org-rainbow-delimiters-depth-4>)</span> <span class=org-rainbow-delimiters-depth-3>}</span>
                     <span class=org-rainbow-delimiters-depth-2>}</span>
                     <span class=org-comment-delimiter>// </span><span class=org-comment>Wrapper to maintain the spacing so the border continues out</span>
                     div<span class=org-rainbow-delimiters-depth-2>(</span>class = <span class=org-string>"cv-content-wrapper"</span><span class=org-rainbow-delimiters-depth-2>)</span> <span class=org-rainbow-delimiters-depth-2>{</span>
                         h4<span class=org-rainbow-delimiters-depth-3>(</span>class = <span class=org-string>"cv-area-role"</span><span class=org-rainbow-delimiters-depth-3>)</span> <span class=org-rainbow-delimiters-depth-3>{</span> <span class=org-rainbow-delimiters-depth-4>(</span>area.role.get<span class=org-rainbow-delimiters-depth-1>()</span><span class=org-rainbow-delimiters-depth-4>)</span> <span class=org-rainbow-delimiters-depth-3>}</span>
                         p<span class=org-rainbow-delimiters-depth-3>(</span>dangerously_set_inner_html = <span class=org-rust-ampersand>&</span>area.description.get<span class=org-rainbow-delimiters-depth-4>()</span><span class=org-rainbow-delimiters-depth-3>)</span> <span class=org-rainbow-delimiters-depth-3>{}</span>
                         div <span class=org-rainbow-delimiters-depth-3>{</span>
                             <span class=org-rainbow-delimiters-depth-4>(</span>projects<span class=org-rainbow-delimiters-depth-4>)</span>
                         <span class=org-rainbow-delimiters-depth-3>}</span>
                     <span class=org-rainbow-delimiters-depth-2>}</span>
                 <span class=org-rainbow-delimiters-depth-1>}</span>
             <span class=org-rainbow-delimiters-depth-4>}</span>
         <span class=org-rainbow-delimiters-depth-3>}</span><span class=org-rainbow-delimiters-depth-2>)</span>
         .collect<span class=org-rainbow-delimiters-depth-2>()</span>
<span class=org-rainbow-delimiters-depth-1>)</span>;

<span class=org-preprocessor>view!</span> <span class=org-rainbow-delimiters-depth-1>{</span> cx,
    div<span class=org-rainbow-delimiters-depth-2>(</span>class = <span class=org-string>"cv-wrapper-outer"</span><span class=org-rainbow-delimiters-depth-2>)</span> <span class=org-rainbow-delimiters-depth-2>{</span>
        div<span class=org-rainbow-delimiters-depth-3>(</span>class = <span class=org-string>"cv-wrapper-inner"</span><span class=org-rainbow-delimiters-depth-3>)</span> <span class=org-rainbow-delimiters-depth-3>{</span>
            <span class=org-rainbow-delimiters-depth-4>(</span>cv<span class=org-rainbow-delimiters-depth-4>)</span>
        <span class=org-rainbow-delimiters-depth-3>}</span>
    <span class=org-rainbow-delimiters-depth-2>}</span>
<span class=org-rainbow-delimiters-depth-1>}</span>
</pre></div><p>The first line of this is where our comprehension problems actually start, and it’s got to do with lifetimes again. But, stick with me, this is actually really easy to understand! Remember that the <code>areas</code> field of <code>resume</code> is nested? Okay, that means we can grab its value with <code>resume.areas.get()</code>, which will give us a reference. But that reference isn’t guaranteed to live as long as <code>'page</code>, because no-one told it to! So, we need to tell it to, which is usually <i>really hard</i> in Rust, but Sycamore has an extremely convenient function called <code>create_ref(cx, val)</code> that returns <code>&'page val</code>, assuming <code>cx: 'page</code>. Pretty much, it takes a thing that it can coerce to live as long as the page (which isn’t everything, but it works here, because I lied a bit about <code>.get()</code>, it actually returns an <code>Rc</code>, which is a thing called a <i>smart pointer</i> in Rust…), and then returns to you a version of it that does live exactly that long. When the user goes to the next page, any such references get automatically cleaned up. <b>The long and short of this is that you need to wrap <code>resume.areas.get()</code> in a <code>create_ref()</code> call</b>, but the reasoning is pretty interesting if you’re getting into Rust! (I have to admit, coming from the JS world, this sort of thing felt like going from being a toddler throwing paint at a wall to developing actual <i>software</i>.)<p>But let’s backtrack for a second: why does <code>areas</code> need to live for as long as the page? Because we’re going to be displaying data from it, and, if those data suddenly aren’t in memory anymore, well, then what are we displaying to the user? Great question, that’s called <i>undefined behaviour</i>, which Rust conveniently makes impossible (well, not impossible, but really freaking hard) through things like lifetimes!<p>Next, we put the view for our resume in a variable called <code>resume</code> (views are just data structures, so you can store them in variables, send them to functions, etc.), which is basically a concatenation (i.e. summing together) of a list of <code>View</code> fragments created by calling the <code>.iter().map()</code> methods on <code>areas</code>, which let us provide a function that will transform each element of the list according to some logic (which, here, is creating a view to display that particular area). Then, we call <code>.collect()</code> to go from a Rust iterator into a <code>Vec&LTView&LTG>></code> (i.e. a list of views), and that gets concatenated by <code>View::new_fragment</code>! Don’t worry if that doesn’t make a great deal of sense, you need to know a bit about how Rust handles iteration to properly get it, but basically understand that the function in <code>.map()</code> is being used to transform each element of the list.<p>So, what is that function doing? Well, it’s using the <code>view!</code> macro to create a new view, which is wrapped in a <code>div</code> that we’ll use for spacing, and then we have two sections: one for the header, which has the name of the area and the time we were involved in it, and then we’ve got a wrapper for the content, which contains the role we had in this area of our life, and then a description of the role (interpolated directly into HTML, which allows us to do things like <code>&LTi>here's some italic text!&LT/i></code> in our <code>.toml</code> files, or you could even do Markdown parsing on the descriptions if you wanted). There are two unexplained things in here though: where <code>projects</code> comes from, and what the heck <code>Time(&area.time.get())</code> means. To understand the latter, remember that the area is a reactive <code>struct CvArea</code>, so each field can have <code>.get()</code> executed on it separately, which lets us not have to worry about the lifetime of <code>area</code>, even though we’re using <code>.iter()</code> and not <code>.into_iter()</code> (for those of you who are already Rustaceans). So, all that expression means is that we’re parsing a reference to the <code>time</code> field’s value to a <i>component</i> called <code>Time</code> (it’s convention in Sycamore, and most JS libraries as well, to capitalise the first letter of your component names) — this will be responsible for rendering those time tuples, when we come to it.<p>Finally, that last little <code>view!</code> macro at the bottom of our function defines the view we’ll be returning, which just interpolates the <code>cv</code> value (which we can do, views can be slotted into other views easily). Chances are that you’ll probably want to add some stuff around this, like a header, a footer, or maybe a picture of yourself, and perhaps your name, maybe an introduction — heck, maybe you want to put in a flappy bird clone! Go crazy, all we’re doing here is popping in that <code>cv</code> variable.<p>For now, let’s keep going on our iteration journey by defining <code>projects</code>. Pop the following code in just above the <code>view!</code> macro in the previous codeblock:<div class=org-src-container><pre class="src src-rust"><span class=org-keyword>let</span> <span class=org-variable-name>projects</span> = create_ref<span class=org-rainbow-delimiters-depth-1>(</span>cx, area.projects.get<span class=org-rainbow-delimiters-depth-2>()</span><span class=org-rainbow-delimiters-depth-1>)</span>;
<span class=org-keyword>let</span> <span class=org-variable-name>projects</span> = <span class=org-type>View</span>::new_fragment<span class=org-rainbow-delimiters-depth-1>(</span>
    projects.iter<span class=org-rainbow-delimiters-depth-2>()</span>
            .map<span class=org-rainbow-delimiters-depth-2>(</span>|project| <span class=org-rainbow-delimiters-depth-3>{</span>
                <span class=org-keyword>let</span> <span class=org-variable-name>achievements</span> = create_ref<span class=org-rainbow-delimiters-depth-4>(</span>cx, project.achievements.get<span class=org-rainbow-delimiters-depth-1>()</span><span class=org-rainbow-delimiters-depth-4>)</span>;
                <span class=org-keyword>let</span> <span class=org-variable-name>achievements</span> = <span class=org-type>View</span>::new_fragment<span class=org-rainbow-delimiters-depth-4>(</span>
                    achievements.iter<span class=org-rainbow-delimiters-depth-1>()</span>
                                .map<span class=org-rainbow-delimiters-depth-1>(</span>|achievement| <span class=org-rainbow-delimiters-depth-2>{</span>
                                    <span class=org-preprocessor>view!</span> <span class=org-rainbow-delimiters-depth-3>{</span> cx,
                                        <span class=org-comment-delimiter>// </span><span class=org-comment>These can have styling, and they all come from</span>
                                        <span class=org-comment-delimiter>// </span><span class=org-comment>a trusted source</span>
                                        li<span class=org-rainbow-delimiters-depth-4>(</span>class = <span class=org-string>"cv-achievement"</span><span class=org-rainbow-delimiters-depth-4>)</span> <span class=org-rainbow-delimiters-depth-4>{</span>
                                            span<span class=org-rainbow-delimiters-depth-1>(</span>dangerously_set_inner_html = <span class=org-rust-ampersand>&</span>achievement.get<span class=org-rainbow-delimiters-depth-2>()</span><span class=org-rainbow-delimiters-depth-1>)</span> <span class=org-rainbow-delimiters-depth-1>{}</span>
                                        <span class=org-rainbow-delimiters-depth-4>}</span>
                                    <span class=org-rainbow-delimiters-depth-3>}</span>
                                <span class=org-rainbow-delimiters-depth-2>}</span><span class=org-rainbow-delimiters-depth-1>)</span>
                                .collect<span class=org-rainbow-delimiters-depth-1>()</span>
                <span class=org-rainbow-delimiters-depth-4>)</span>;

                <span class=org-preprocessor>view!</span> <span class=org-rainbow-delimiters-depth-4>{</span> cx,
                    div<span class=org-rainbow-delimiters-depth-1>(</span>class = <span class=org-string>"cv-project-header"</span><span class=org-rainbow-delimiters-depth-1>)</span> <span class=org-rainbow-delimiters-depth-1>{</span>
                        a<span class=org-rainbow-delimiters-depth-2>(</span>class = <span class=org-string>"cv-project-name"</span>, href = project.link.get<span class=org-rainbow-delimiters-depth-3>()</span><span class=org-rainbow-delimiters-depth-2>)</span> <span class=org-rainbow-delimiters-depth-2>{</span>
                            span <span class=org-rainbow-delimiters-depth-3>{</span> <span class=org-rainbow-delimiters-depth-4>(</span><span class=org-rainbow-delimiters-depth-1>(</span>project.name.get<span class=org-rainbow-delimiters-depth-2>()</span><span class=org-rainbow-delimiters-depth-1>)</span><span class=org-rainbow-delimiters-depth-4>)</span> <span class=org-rainbow-delimiters-depth-3>}</span>
                            span<span class=org-rainbow-delimiters-depth-3>(</span>style = <span class=org-string>"font-style: italic;"</span><span class=org-rainbow-delimiters-depth-3>)</span> <span class=org-rainbow-delimiters-depth-3>{</span> <span class=org-rainbow-delimiters-depth-4>(</span><span class=org-rust-builtin-formatting-macro>format!</span><span class=org-rainbow-delimiters-depth-1>(</span><span class=org-string>" (</span><span class=org-rust-string-interpolation>{}</span><span class=org-string>)"</span>, project.status.get<span class=org-rainbow-delimiters-depth-2>()</span><span class=org-rainbow-delimiters-depth-1>)</span><span class=org-rainbow-delimiters-depth-4>)</span> <span class=org-rainbow-delimiters-depth-3>}</span>
                        <span class=org-rainbow-delimiters-depth-2>}</span>
                        p<span class=org-rainbow-delimiters-depth-2>(</span>class = <span class=org-string>"cv-time"</span><span class=org-rainbow-delimiters-depth-2>)</span> <span class=org-rainbow-delimiters-depth-2>{</span> <span class=org-type>Time</span><span class=org-rainbow-delimiters-depth-3>(</span><span class=org-rust-ampersand>&</span>project.time.get<span class=org-rainbow-delimiters-depth-4>()</span><span class=org-rainbow-delimiters-depth-3>)</span> <span class=org-rainbow-delimiters-depth-2>}</span>
                    <span class=org-rainbow-delimiters-depth-1>}</span>
                    h4<span class=org-rainbow-delimiters-depth-1>(</span>class = <span class=org-string>"cv-project-role"</span><span class=org-rainbow-delimiters-depth-1>)</span> <span class=org-rainbow-delimiters-depth-1>{</span> <span class=org-rainbow-delimiters-depth-2>(</span>project.role.get<span class=org-rainbow-delimiters-depth-3>()</span><span class=org-rainbow-delimiters-depth-2>)</span> <span class=org-rainbow-delimiters-depth-1>}</span>
                    p<span class=org-rainbow-delimiters-depth-1>(</span>dangerously_set_inner_html = <span class=org-rust-ampersand>&</span>project.description.get<span class=org-rainbow-delimiters-depth-2>()</span><span class=org-rainbow-delimiters-depth-1>)</span> <span class=org-rainbow-delimiters-depth-1>{}</span>
                    ul<span class=org-rainbow-delimiters-depth-1>(</span>class = <span class=org-string>"cv-achievement-list"</span><span class=org-rainbow-delimiters-depth-1>)</span> <span class=org-rainbow-delimiters-depth-1>{</span>
                        <span class=org-rainbow-delimiters-depth-2>(</span>achievements<span class=org-rainbow-delimiters-depth-2>)</span>
                    <span class=org-rainbow-delimiters-depth-1>}</span>
                <span class=org-rainbow-delimiters-depth-4>}</span>
            <span class=org-rainbow-delimiters-depth-3>}</span><span class=org-rainbow-delimiters-depth-2>)</span>
            .collect<span class=org-rainbow-delimiters-depth-2>()</span>
<span class=org-rainbow-delimiters-depth-1>)</span>;
</pre></div><p>We’ve actually just gone ahead here and thrown in the achievements as well, since they’re pretty easy to do. Notice that, because we’re doing another layer of iteration, we’re using <code>create_ref</code> on the <code>area.projects</code> field, and then we’re creating another concatenation of a list of <code>View&LTG></code> objects, just like before — nothing new there. All this means that <code>projects</code> will end up holding a <code>View&LTG></code> we can interpolate, as we did in the previous codeblock. Ignoring the section that defines <code>achievements</code> for a second, the markup of each project is just a header with the name of the project as a link to wherever we specified, and then the time next to it. The contents have the role we had in the project, the description (again interpolated directly as HTML to preserve things like italics), and then an unordered list (i.e. bullet points) for all the great things we did during this project.<p>Each achievement is just a string in our <code>.toml</code> files, so, fittingly, each one just translates to a list item (i.e. the <code>li</code> element in HTML), and we can do that with the code that defines <code>achievements</code>: again, it’s the same process of using <code>create_ref</code> and then <code>View::new_fragment</code>, and each achievement just gets its own <code>li</code> with a <code>span</code> for the contents, directly interpolated to preserve formatting. Notice the comment here, which clarifies a few things about <code>dangerously_set_inner_html</code> (which, by the way, only takes references, hence the <code>&</code> in front of <code>achievement.get()</code>): we should only ever use it when <i>we</i> control what’s going to be in there. Do <b>not</b> ever, ever, ever put stuff users have provided into this property, because they might throw scripts in there! For example, let’s say you turn this into a full-on social media site around CVs, and you let users specify their details in Markdown, which you then parse. If you don’t also run a special <i>sanitiser</i> on that Markdown, they might have put some nifty little <code>&LTscript></code> tags in there, which are then going to be executed in the browser of every user who visits their page, all because you put their untrusted content in <code>dangerously_set_inner_html</code>. These are called <i>cross-site scripting attacks</i> (XSS), and they are seriously not fun. Here, though, it’s fine to use this property, because it’s your personal website, and you wrote the content in the <code>.toml</code> files. That said, if you were to let anyone edit those files, using this property would be a terrible idea (because anyone could abuse it to make your website unusable by, say, loading cryptominer tech into your users’ browsers). Alright, XSS rant over!</div><div id=outline-container-org2f1cbc3 class=outline-3><h3 id=org2f1cbc3>Displaying the time</h3><div class=outline-text-3 id=text-org2f1cbc3><p>Now, we’ve got every little bit of this CV set up, which is pretty darn cool! However, we have a distinct problem, which is that, if you run this right now, <code>Time</code> is undefined. So, let’s define it! Since this is to do with the CV itself, I would put this into the <code>cv</code> module like so:<div class=org-src-container><pre class="src src-rust"><span class=org-preprocessor>#</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>[</span></span><span class=org-preprocessor>component</span><span class=org-preprocessor><span class=org-rainbow-delimiters-depth-1>]</span></span>
<span class=org-keyword>pub</span> <span class=org-keyword>fn</span> <span class=org-type>Time</span><span class=org-rainbow-delimiters-depth-1><</span><span class=org-variable-name>G</span>: <span class=org-type>Html</span><span class=org-rainbow-delimiters-depth-1>>(</span><span class=org-variable-name>cx</span>: <span class=org-type>Scope</span>, <span class=org-variable-name>time</span>: <span class=org-rust-ampersand>&</span><span class=org-rainbow-delimiters-depth-2>(</span><span class=org-type>CvTime</span>, <span class=org-type>CvTime</span><span class=org-rainbow-delimiters-depth-2>)</span><span class=org-rainbow-delimiters-depth-1>)</span> -> <span class=org-type>View</span><span class=org-rainbow-delimiters-depth-1><</span><span class=org-type>G</span><span class=org-rainbow-delimiters-depth-1>></span> <span class=org-rainbow-delimiters-depth-1>{</span>
    <span class=org-keyword>let</span> <span class=org-variable-name>start</span> = <span class=org-keyword>match</span> <span class=org-rust-ampersand>&</span>time.<span class=org-highlight-numbers-number>0</span> <span class=org-rainbow-delimiters-depth-2>{</span>
        <span class=org-type>CvTime</span>::<span class=org-type>Present</span> => <span class=org-string>"Present"</span>.to_string<span class=org-rainbow-delimiters-depth-3>()</span>,
        <span class=org-type>CvTime</span>::<span class=org-type>Year</span><span class=org-rainbow-delimiters-depth-3>(</span>year<span class=org-rainbow-delimiters-depth-3>)</span> => year.to_string<span class=org-rainbow-delimiters-depth-3>()</span>,
    <span class=org-rainbow-delimiters-depth-2>}</span>;
    <span class=org-keyword>let</span> <span class=org-variable-name>end</span> = <span class=org-keyword>match</span> <span class=org-rust-ampersand>&</span>time.<span class=org-highlight-numbers-number>1</span> <span class=org-rainbow-delimiters-depth-2>{</span>
        <span class=org-type>CvTime</span>::<span class=org-type>Present</span> => <span class=org-string>"Present"</span>.to_string<span class=org-rainbow-delimiters-depth-3>()</span>,
        <span class=org-type>CvTime</span>::<span class=org-type>Year</span><span class=org-rainbow-delimiters-depth-3>(</span>year<span class=org-rainbow-delimiters-depth-3>)</span> => year.to_string<span class=org-rainbow-delimiters-depth-3>()</span>,
    <span class=org-rainbow-delimiters-depth-2>}</span>;

    <span class=org-preprocessor>view!</span> <span class=org-rainbow-delimiters-depth-2>{</span> cx,
            span <span class=org-rainbow-delimiters-depth-3>{</span>
                <span class=org-rainbow-delimiters-depth-4>(</span>start<span class=org-rainbow-delimiters-depth-4>)</span>
                span<span class=org-rainbow-delimiters-depth-4>(</span>dangerously_set_inner_html = <span class=org-string>"&ampndash;"</span><span class=org-rainbow-delimiters-depth-4>)</span> <span class=org-rainbow-delimiters-depth-4>{}</span>
                <span class=org-rainbow-delimiters-depth-4>(</span>end<span class=org-rainbow-delimiters-depth-4>)</span>
            <span class=org-rainbow-delimiters-depth-3>}</span>
    <span class=org-rainbow-delimiters-depth-2>}</span>
<span class=org-rainbow-delimiters-depth-1>}</span>
</pre></div><p>Alright, let’s go for another breakdown. The first thing we’re doing is annotating our component function with the <code>#[component]</code> macro, which tells Sycamore to treat this function as…well, a component. Right now, all this actually does behind the scenes is tells Rust that it’s okay for you to have a function name that doesn’t start with a lower case letter (Rust is fussy about that kind of thing), but, in the past, it’s done much more, and it may well in the future (like enabling near-instant hot reloading, perhaps…). The rest of this function is similar to what you might expect from a Perseus view function (because they were modelled on components!): it takes in a scope (without the fancy lifetimes though, since we’re not using reactive state), and then a value, which is the property of the component. You can do all sorts of fancy stuff here, like define a <code>struct</code> that uses <code>#[derive(Prop)]</code> to let you do things like <code>MyComponent(color = "red", foo = true, bar = 5) { span { "Hello!" } }</code>, but, here, we just want the basics — we’ll take in a tuple of two <code>CvTime</code> values, and then we’re literally just matching on them to either display <i>Present</i> or the year in question, and then we render those in a little <code>span</code>. If you’re unfamiliar with HTML though, you’re probably wondering what the heck that thing in the middle is: it’s an <i>en dash</i> (i.e. –), which is longer than a hyphen, but shorter than an <i>em dash</i> (yes, these are real things, and these are what Word extends your hyphens between phrases to when you type the spacebar). In time ranges, an en dash is correct, so that’s what we’re using! With these kinds of non-bog-standard characters though, it’s generally a good idea to use the HTML codes for them: in this case, <code>&ampndash;</code>, since otherwise the browser can get confused (especially if you’re doing this with internationalization, which Perseus supports natively, because that involves inserting some wacky special characters to tell the browser whether the language in question is read left-to-right, like English, or right-to-left, like Arabic — all this becomes a mess on the web, just use the HTML codes).<p>Anyway, if you import that into the root of the <code>src/templates/index.rs</code> file with <code>use self::cv::Time</code>, your code should compile! But, how do we know if it does? More to the point, how can we run this app?</div></div></div><div id=outline-container-orgcd9810d class=outline-2><h2 id=orgcd9810d>Running it!</h2><div class=outline-text-2 id=text-orgcd9810d><p>In Perseus, you’ve got the <code>perseus</code> CLI at your disposal for things like running your app, and debugging it while you build it. The first command you’ll want to get cozy with is <code>perseus check -w</code>, which, as it says on the tin, <i>checks</i> your app: it doesn’t compile it, it just checks if it’s valid (which is a damn sight quicker than an all-out compilation). This is different from the usual <code>cargo check</code> that you’d use in a Rust project in that it will automatically update when you change your code (that’s the <code>-w</code>, which can be applied to almost all <code>perseus</code> commands), and in that it checks both the engine-side and the client-side of your app. Remember those <code>#[cfg(engine)]</code> tags? Well, the Perseus CLI is what provides the <code>--cfg=engine</code> to the Rust compiler that’s needed to make this work. Because Rust views your app for the engine-side as <i>completely different</i> from your app for the client-side, Perseus separates the build artefacts for the two, and handles the separation of concerns in that magical <code>dist/</code> directory, so you can just get on with coding, and not have to worry about recompiling <i>everything</i> when you change from engine-side to client-side development.<p>The next command you’ll use a lot is <code>perseus serve -w</code>, which will also watch your code for changes, but rather than checking it, it will compile and execute it, setting up a server to do so: that will then let you actually navigate to your app in a web browser, like we did at the very beginning of this tutorial (congrats on getting this far, by the way!). But, for this app, we haven’t actually done anything that needs a server: we aren’t doing anything at request-time (e.g. extracting cookies from the user’s request and using them to influence the pages we generate, say for authentication), and we aren’t doing any incremental generation or state revalidation (all <i>really cool</i> things you can do in Perseus that can supercharge your app), so all we actually need is a static site. In this case, we can use <code>perseus export -sw</code>, which isn’t faster than <code>perseus serve -w</code>, but it will produce a series of static files, which, because of the <code>-s</code>, it will then auto-serve for us. In production, we can put these onto a host like GitHub Pages, or, heck, even Dropbox, and serve them as a static website, which is usually <i>much</i> cheaper than running a proper server. So, let’s try it!<div class=org-src-container><pre class="src src-sh">perseus export -sw
</pre></div><p>Chances are, you might get some errors here, maybe from a missing semicolon, or perhaps from a lifetime you missed, or maybe you misspelled the name of a macro, or maybe I can’t write code and I made a glaring mistake in this post (please point it out in the comments, thank you!), but Perseus just invokes the Rust compiler, so you should be able to pretty easily fix your mistakes (it basically guides you through the process).<p>Once your app is compiling and building, you should have all green ticks, and you’re good to go! Perseus will first <i>compile</i> your app, using Rust, and then it will execute the static generation functions you provided, like <code>get_build_state</code>, which could also produce errors, which the CLI would also report (e.g. if you haven’t created the directory for your <code>.toml</code> files yet). But, when all that is fixed, you should have an app that builds! And, because of the guarantees of Rust, if your app builds, it probably works too.<p>So, navigate over to <a href=http://localhost:8080>http://localhost:8080</a>, where Perseus serves your apps by default (configurable, of course), and see what you’ve got! It’ll probably look terrible, because we haven’t done any styling yet, but it should at least display all the information in your CV correctly. If it does, let’s get to styling this baby. And, you might as well keep that command running, since it will reload both your app, and the browser, whenever you change your code (and, since we added those <code>#[rx(hsr_ignore)]</code> lines, if you change the CV files themselves, your app will also update properly).</div></div><div id=outline-container-orgde696a1 class=outline-2><h2 id=orgde696a1>Making it look pretty</h2><div class=outline-text-2 id=text-orgde696a1><p>For us to be able to style this, we first need some kind of styling system. A lot of people, myself included, use <a href=https://tailwindcss.com>Tailwind</a> for this, but, to keep things open, we’ll just use pure CSS here (derived from the implementation in Tailwind on my own site). To get that working, we’ll need to import a stylesheet into our CV page, which can be done through the document metadata by adding this line after <code>title { .. }</code> in your <code>head</code> function:<div class=org-src-container><pre class="src src-rust">link<span class=org-rainbow-delimiters-depth-1>(</span>rel = <span class=org-string>"stylesheet"</span>, href = <span class=org-string>".perseus/static/cv.css"</span><span class=org-rainbow-delimiters-depth-1>)</span>
</pre></div><p>Notice the lack of a leading <code>/</code> in this <code>href</code>, since Perseus inserts an HTML <code>&LTbase /></code> tag into your site automatically, meaning you can host it on relative paths (e.g. <code>mysite.com/cv-website</code>), and everything will still work. Adding a leading <code>/</code> would break this compatibility (but, if you’re hosting on a domain directly, you don’t need to worry about this).<p>The <code>.perseus/static</code> path is special, because it will contain the contents of the <code>static/</code> directory at the root of your project, if you have one: so, let’s create that directory and throw a <code>cv.css</code> file inside! To check everything’s working, try putting this inside:<div class=org-src-container><pre class="src src-css"><span class=org-css-selector>body</span> {
    <span class=org-css-property>background-color</span>: <span class=custom>red</span>;
}
</pre></div><p>When your app reloads, everything should be red now, and that means your CSS is being correctly imported. Here’s a style-file for you that makes things look nice, which you’re more than welcome to unpack (weird bits are commented), or change as you wish. Make sure to replace the background colour change from above with this (unless you <i>want</i> everything to be red, of course).<p>#+begin<sub>src</sub> css</div></div><div id=outline-container-org498dc28 class=outline-2><h2 id=org498dc28>{</h2><div class=outline-text-2 id=text-org498dc28><p>margin: 0; padding: 0; }<p>.cv-wrapper-outer { /*<ul class=org-ul><li>Put whatever you like in here to make it integrate with your site,<li>here we’re just making it centred.</ul><p><b>/ width: 100%; display: flex; flex-direction: column; align-items: center; } .cv-wrapper-inner { /</b> Good width for prose according to Tailwind <b>/ max-width: 65ch; } .cv-area-wrapper { margin-top: 0.75rem; margin-bottom: 0.75rem; } .cv-area-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid black; padding-left: 1rem; padding-right: 1rem; } .cv-area-heading { font-size: 1.5rem; line-height: 2rem; } .cv-time { margin-left: 0.25rem; } .cv-content-wrapper { padding-left: 1rem; padding-right: 1rem; } /</b> Using Tailwind’s definition of a medium-sized screen here <b>/ @media(min-width: 768px) { .cv-content-wrapper { margin-left: 0.5rem; } } .cv-area-role { color: #404040; font-style: italic; font-size: 1.25rem; line-height: 1.75rem; } .cv-project-header { display: flex; justify-content: space-between; align-items: center; } .cv-project-name { font-size: 1.25rem; line-height: 1.75rem; color: #3b82f6; /</b> Please change this to suit your site <b>/ /</b> Let’s make a little hover animation for the link colour <b>/ transition-property: background-color, border-color, color, fill, stroke; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; } .cv-project-name:hover { color: #60a5fa; /</b> Please change this to suit your site */ } .cv-project-role { color: #404040; font-style: italic; font-size: 1.125rem; line-height: 1.75rem; } .cv-achievement-list { list-style-type: disc; } .cv-achievement { margin-left: 1.75rem; } #+end<sub>src</sub><p>And, with that, you should have something that looks like this!<p>[TODO screenshot]</div></div><div id=outline-container-orgc3b264c class=outline-2><h2 id=orgc3b264c>Deploying it!</h2><div class=outline-text-2 id=text-orgc3b264c><p>Finally, before you go, let’s <i>deploy</i> this site of yours to GitHub Pages (free for public repositories). Create a new GitHub repo in your own account and name it whatever you like. Then, upload everything you’ve done to that repo (GitHub has excellent instructions for this if you’re new to Git), and then create a file in <code>.github/workflows/deploy.yml</code>, with these contents:<div class=org-src-container><pre class="src src-yaml"><span class=org-variable-name>name</span>: Build and Publish Site
<span class=org-variable-name>on</span>:
    <span class=org-variable-name>push</span>:
        <span class=org-variable-name>branches</span>:
            - main

<span class=org-variable-name>jobs</span>:
    <span class=org-variable-name>build</span>:
        <span class=org-variable-name>runs-on</span>: ubuntu-20.04
        <span class=org-variable-name>steps</span>:
            - <span class=org-variable-name>uses</span>: actions/checkout@v2

            - <span class=org-variable-name>name</span>: Install Dependencies
              <span class=org-variable-name>run</span>: cargo install perseus-cli --version 0.4.0-beta.21

            - <span class=org-variable-name>name</span>: Build site
              <span class=org-variable-name>run</span>: perseus deploy -e
              <span class=org-variable-name>env</span>:
                <span class=org-comment-delimiter># </span><span class=org-comment>Update this with your details so Perseus can host your site correctly</span>
                <span class=org-variable-name>PERSEUS_BASE_PATH</span>: https://&LTyour-username>.github.io/&LTrepo-name>

            - <span class=org-variable-name>name</span>: Deploy site to GitHub Pages
              <span class=org-variable-name>uses</span>: peaceiris/actions-gh-pages@v3
              <span class=org-variable-name>if</span>: github.ref == <span class=org-string>'refs/heads/main'</span>
              <span class=org-variable-name>with</span>:
                  <span class=org-variable-name>github_token</span>: ${{ secrets.GITHUB_TOKEN }}
                  <span class=org-variable-name>publish_dir</span>: pkg
</pre></div><p>This will be our GitHub Actions workflow for building your app in release mode and sending it off to GitHub Pages!<p>If you’re unfamiliar with GHA workflows, don’t worry too much about this: it just runs whenever you push a new commit to the <code>main</code> branch of your repo, installs the Perseus CLI, and then runs the magic command:<div class=org-src-container><pre class="src src-sh">perseus deploy -e
</pre></div><p>Yep, that’s all you need to deploy your brand-new app to a series of static files that can be hosted on any file hosting provider! Importantly, GitHub Pages will host your site by default at <code>https://&LTyour-username>.github.io/&LTrepo-name></code>, which means it will be hosted at a <i>relative path</i> (i.e. not at the root of the <code>&LTyour-username>.github.io</code> domain). This means any paths will have to have that prefixed to them, which, in some cases, could mean major changes to your app, but fear not! Perseus will <i>automatically</i> take this into account during deployment, as long as you provide it with a base URL where everything will be hosted. If you were using <code>perseus deploy</code>, which will produce a <code>pkg/server</code> binary, then you would provide this environment variable when you <i>run</i> the server, but, since we’re exporting (that’s the <code>-e</code> flag), we’ll provide it at compile-time (since there is no server to actually run, and this kind of info has to be hardcoded). This is done through the <code>PERSEUS_BASE_PATH</code> environment variable, the value of which you should update when you create your workflow file. A telltale sign that you’ve misconfigured this is if your site is uninteractive, and if there are errors in the browser console saying Perseus couldn’t find things like <code>bundle.wasm</code> (where all your app’s logic ends up).<p>Meanwhile, the actual deployment of the <code>pkg/</code> directory (where <code>perseus deploy</code> puts everything by default) is handled by a nifty little action called <code>actions-gh-pages</code>, which does exactly what it says on the tin: takes the given directory, and populates the <code>gh-pages</code> branch with it. This means your <code>main</code> branch doesn’t get polluted with any artefacts from <code>pkg/</code>: they all get transferred into a dedicated branch that you can tell GitHub to host for you.<p>Assuming your repository is public, or if you’re a GitHub Pro user, then you can pop into your repo’s settings and go to the <i>Pages</i> section, which will let you pick a branch to deploy from: select <code>gh-pages</code>, and, a few moments later, your site should be ready! From here on, that workflow will ensure that, every time you push a commit to your site, it will be rebuilt for production and hosted on GitHub Pages! The default URL will be <code>https://&LTyour-github-username>.github.io/&LTrepo-name></code>, but you can change this if you own any other domains (GitHub has some great documentation on how to do this).<p>Of course, if you want to deploy your static files to another provider, like Vercel or Netlify, you can do that as well! Anyone who accepts static files will work (although Netlify has had problems with the <code>/.perseus</code> URL on exported apps in the past, so you might have better luck with Vercel).</div></div><div id=outline-container-orgd5c6d0b class=outline-2><h2 id=orgd5c6d0b>Conclusion</h2><div class=outline-text-2 id=text-orgd5c6d0b><p>Building a website in Rust is an experience for those who haven’t worked with it before: you have to wrangle with references, lifetimes, the borrow checker, the rest of the compiler, and, if you’re coming from JS, even static typing can be a bit of a shock. Sycamore aims to make using Rust for building website views fairly painless, and Perseus builds on it to provide a comprehensive state generation system that allows you to do stuff like we’ve just done: take some <code>.toml</code> files, parse them at build-time, and interpolate them into your Sycamore views. In this post, we used <i>reactive state</i>, which wasn’t required for this use-case (and using unreactive state would simplify things), but doing so allows us to look at reactivity in Perseus, lifetimes, and application-level caching, together with a little explanation of how Perseus’ hot state reloading system works.<p>All in all, Perseus is a fantastic framework for building small, robust websites, as well as massive, state-heavy applications, all while maintaining ludicrous speed and excellent ergonomics (although, if you’re new to Rust, things take a while to get used to). Now that you’ve deployed your little CV website, try pointing <a href=https://pagespeed.web.dev/>this tool</a> at it, and it will produce a score out of 100 based on Google’s <i>Lighthouse</i> metrics, which are commonly used to judge the performance of webpages. If you’ve followed these instructions correctly, you should have a 100 score on desktop easily, and a score well above 90 on mobile (Perseus doesn’t do quite as well on mobile, because Google tests with simulations of devices that aren’t optimised to run Wasm: real-world clients on more modern phones (in the Western world, at least) will usually have desktop-level speeds). If you have any problems with any of this, feel free to leave a comment on this post, and, if you’d like to learn more about Perseus, check out its website <a href=https://framesurge.sh/perseus/en-US>here</a> (which is, of course, built with Perseus).<p>Happy coding!<p><i>Disclaimer: I am the maintainer of Perseus, give it a star!</i></div></div></div></div></div><div data-hk=1.7 class="flex flex-col items-center w-full"><ul data-hk=1.8 class="flex justify-center text-center mt-4"><li data-hk=0.0 class=inline-block><a data-hk=0.1 class="block border-4 border-neutral-800 hover:bg-neutral-800 transition-colors duration-150 rounded-lg p-2 px-4 m-2 font-mono flex items-center"href=tag/programming>programming</a><li data-hk=0.2 class=inline-block><a data-hk=0.3 class="block border-4 border-neutral-800 hover:bg-neutral-800 transition-colors duration-150 rounded-lg p-2 px-4 m-2 font-mono flex items-center"href=tag/rust>rust</a><li data-hk=0.4 class=inline-block><a data-hk=0.5 class="block border-4 border-neutral-800 hover:bg-neutral-800 transition-colors duration-150 rounded-lg p-2 px-4 m-2 font-mono flex items-center"href=tag/webdev>webdev</a><li data-hk=0.6 class=inline-block><a data-hk=0.7 class="block border-4 border-neutral-800 hover:bg-neutral-800 transition-colors duration-150 rounded-lg p-2 px-4 m-2 font-mono flex items-center"href=tag/tutorial>tutorial</a><li data-hk=0.8 class=inline-block><a data-hk=0.9 class="block border-4 border-neutral-800 hover:bg-neutral-800 transition-colors duration-150 rounded-lg p-2 px-4 m-2 font-mono flex items-center"href=tag/perseus>perseus</a><li data-hk=0.10 class=inline-block><a data-hk=0.11 class="block border-4 border-neutral-800 hover:bg-neutral-800 transition-colors duration-150 rounded-lg p-2 px-4 m-2 font-mono flex items-center"href=tag/css>css</a></ul><div data-hk=1.9 class="max-w-prose px-4 mt-8 giscus"></div></div><script data-hk=1.10 src=https://giscus.app/client.js data-repo=arctic-hen7/arctic-hen7.github.io data-repo-id=MDEwOlJlcG9zaXRvcnkzNjc4MTc5Njk= data-category=Comments data-category-id=DIC_kwDOFex08c4CSjuT data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=top data-theme=dark_high_contrast data-lang=en data-loading=lazy crossorigin async></script></main><footer data-hk=1.23 class="w-full flex justify-center py-5 bg-black"><p data-hk=1.24 class="mx-5 text-center">© arctic-hen7 2021-2022</footer></div><div id=__perseus_popup_error></div>